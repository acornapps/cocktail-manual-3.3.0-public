<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.55.0" />
    <meta name="description" content="">


    <link rel="icon" href="/cocktail-manual-3.3.0-public/images/favicon.png" type="image/png">

    <title>8.1.1.3 EKS 클러스터 만들기 :: 칵테일 클라우드</title>

    
    <link href="/cocktail-manual-3.3.0-public/css/nucleus.css?1555832258" rel="stylesheet">
    <link href="/cocktail-manual-3.3.0-public/css/fontawesome-all.min.css?1555832258" rel="stylesheet">
    <link href="/cocktail-manual-3.3.0-public/css/hybrid.css?1555832258" rel="stylesheet">
    <link href="/cocktail-manual-3.3.0-public/css/featherlight.min.css?1555832258" rel="stylesheet">
    <link href="/cocktail-manual-3.3.0-public/css/perfect-scrollbar.min.css?1555832258" rel="stylesheet">
    <link href="/cocktail-manual-3.3.0-public/css/auto-complete.css?1555832258" rel="stylesheet">
    <link href="/cocktail-manual-3.3.0-public/css/atom-one-dark-reasonable.css?1555832258" rel="stylesheet">
    <link href="/cocktail-manual-3.3.0-public/css/theme.css?1555832258" rel="stylesheet">
    <link href="/cocktail-manual-3.3.0-public/css/hugo-theme.css?1555832258" rel="stylesheet">
    

    <script src="/cocktail-manual-3.3.0-public/js/jquery-3.3.1.min.js?1555832258"></script>

    <style type="text/css">
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/cocktail-manual-3.3.0-public/8.operation/8.1.cluster-install/8.1.1.kass/8.1.1.3-cluster-kass-eks/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="/">

	<img src="/cocktail-manual-3.3.0-public/images/logo.png" width="100" height="80"/>

</a>
    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/cocktail-manual-3.3.0-public/js/lunr.min.js?1555832258"></script>
<script type="text/javascript" src="/cocktail-manual-3.3.0-public/js/auto-complete.js?1555832258"></script>
<script type="text/javascript">
    
        var baseurl = "http:\/\/acornapps.github.io\/cocktail-manual-3.3.0-public";
    
</script>
<script type="text/javascript" src="/cocktail-manual-3.3.0-public/js/search.js?1555832258"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          


 
  
    
    <li data-nav-id="/cocktail-manual-3.3.0-public/1.intro/" title="칵테일 클라우드 이해" class="dd-item 
        
        
        
        ">
      <a href="/cocktail-manual-3.3.0-public/1.intro/">
          <b>1. </b>칵테일 클라우드 이해
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/cocktail-manual-3.3.0-public/1.intro/0.1/" title="Cocktail Cloud 구성 개요" class="dd-item ">
        <a href="/cocktail-manual-3.3.0-public/1.intro/0.1/">
        Cocktail Cloud 구성 개요
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/cocktail-manual-3.3.0-public/1.intro/0.2/" title="Cluster Management Layer (클러스터 관리 레이어)" class="dd-item ">
        <a href="/cocktail-manual-3.3.0-public/1.intro/0.2/">
        Cluster Management Layer (클러스터 관리 레이어)
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/cocktail-manual-3.3.0-public/1.intro/0.3/" title="Service Management Layer (서비스 관리 레이어)" class="dd-item ">
        <a href="/cocktail-manual-3.3.0-public/1.intro/0.3/">
        Service Management Layer (서비스 관리 레이어)
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/cocktail-manual-3.3.0-public/1.intro/0.4/" title="Pipeline Layer (파이프라인 레이어)" class="dd-item ">
        <a href="/cocktail-manual-3.3.0-public/1.intro/0.4/">
        Pipeline Layer (파이프라인 레이어)
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/cocktail-manual-3.3.0-public/1.intro/0.5/" title="Catalog Layer (카탈로그 레이어)" class="dd-item ">
        <a href="/cocktail-manual-3.3.0-public/1.intro/0.5/">
        Catalog Layer (카탈로그 레이어)
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/cocktail-manual-3.3.0-public/1.intro/0.6/" title="Dashboard Layer (대시보드 레이어)" class="dd-item ">
        <a href="/cocktail-manual-3.3.0-public/1.intro/0.6/">
        Dashboard Layer (대시보드 레이어)
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/cocktail-manual-3.3.0-public/2.system-management/" title="시스템 관리" class="dd-item 
        
        
        
        ">
      <a href="/cocktail-manual-3.3.0-public/2.system-management/">
          <b>2. </b>시스템 관리
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/cocktail-manual-3.3.0-public/2.system-management/2.1.system/" title="2.1 시스템" class="dd-item 
        
        
        
        ">
      <a href="/cocktail-manual-3.3.0-public/2.system-management/2.1.system/">
          2.1 시스템
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/cocktail-manual-3.3.0-public/2.system-management/2.1.system/2.1.1-edit/" title="2.1.1 시스템 편집" class="dd-item ">
        <a href="/cocktail-manual-3.3.0-public/2.system-management/2.1.system/2.1.1-edit/">
        2.1.1 시스템 편집
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/cocktail-manual-3.3.0-public/2.system-management/2.1.system/2.1.2-meteringadd/" title="2.1.2 클라우드 미터링 계정 등록" class="dd-item ">
        <a href="/cocktail-manual-3.3.0-public/2.system-management/2.1.system/2.1.2-meteringadd/">
        2.1.2 클라우드 미터링 계정 등록
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/cocktail-manual-3.3.0-public/2.system-management/2.1.system/2.1.3-meteringedit/" title="2.1.3 클라우드 미터링 계정 편집" class="dd-item ">
        <a href="/cocktail-manual-3.3.0-public/2.system-management/2.1.system/2.1.3-meteringedit/">
        2.1.3 클라우드 미터링 계정 편집
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/cocktail-manual-3.3.0-public/2.system-management/2.1.system/2.1.4-meteringdelete/" title="2.1.4 클라우드 미터링 계정 삭제" class="dd-item ">
        <a href="/cocktail-manual-3.3.0-public/2.system-management/2.1.system/2.1.4-meteringdelete/">
        2.1.4 클라우드 미터링 계정 삭제
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/cocktail-manual-3.3.0-public/2.system-management/2.1.system/2.1.5-useradd/" title="2.1.5 시스템 사용자 추가" class="dd-item ">
        <a href="/cocktail-manual-3.3.0-public/2.system-management/2.1.system/2.1.5-useradd/">
        2.1.5 시스템 사용자 추가
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/cocktail-manual-3.3.0-public/2.system-management/2.1.system/2.1.6-useredit/" title="2.1.6 시스템 사용자 편집" class="dd-item ">
        <a href="/cocktail-manual-3.3.0-public/2.system-management/2.1.system/2.1.6-useredit/">
        2.1.6 시스템 사용자 편집
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/cocktail-manual-3.3.0-public/2.system-management/2.1.system/2.1.7-userreset/" title="2.1.7 시스템 사용자 비밀번호 초기화" class="dd-item ">
        <a href="/cocktail-manual-3.3.0-public/2.system-management/2.1.system/2.1.7-userreset/">
        2.1.7 시스템 사용자 비밀번호 초기화
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/cocktail-manual-3.3.0-public/2.system-management/2.1.system/2.1.8-userdelete/" title="2.1.8 시스템 사용자 삭제" class="dd-item ">
        <a href="/cocktail-manual-3.3.0-public/2.system-management/2.1.system/2.1.8-userdelete/">
        2.1.8 시스템 사용자 삭제
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/cocktail-manual-3.3.0-public/2.system-management/2.2.cluster/" title="2.2 클러스터" class="dd-item 
        
        
        
        ">
      <a href="/cocktail-manual-3.3.0-public/2.system-management/2.2.cluster/">
          2.2 클러스터
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/cocktail-manual-3.3.0-public/2.system-management/2.2.cluster/2.2.1-add/" title="2.2.1 클러스터 등록" class="dd-item ">
        <a href="/cocktail-manual-3.3.0-public/2.system-management/2.2.cluster/2.2.1-add/">
        2.2.1 클러스터 등록
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/cocktail-manual-3.3.0-public/2.system-management/2.2.cluster/2.2.2-update/" title="2.2.2 클러스터 수정" class="dd-item ">
        <a href="/cocktail-manual-3.3.0-public/2.system-management/2.2.cluster/2.2.2-update/">
        2.2.2 클러스터 수정
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/cocktail-manual-3.3.0-public/2.system-management/2.2.cluster/2.2.3-delete/" title="2.2.3 클러스터 삭제" class="dd-item ">
        <a href="/cocktail-manual-3.3.0-public/2.system-management/2.2.cluster/2.2.3-delete/">
        2.2.3 클러스터 삭제
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/cocktail-manual-3.3.0-public/2.system-management/2.2.cluster/2.2.4-volume/" title="2.2.4 볼륨" class="dd-item ">
        <a href="/cocktail-manual-3.3.0-public/2.system-management/2.2.cluster/2.2.4-volume/">
        2.2.4 볼륨
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/cocktail-manual-3.3.0-public/2.system-management/2.2.cluster/2.2.5-add/" title="2.2.5 스토리지 추가" class="dd-item ">
        <a href="/cocktail-manual-3.3.0-public/2.system-management/2.2.cluster/2.2.5-add/">
        2.2.5 스토리지 추가
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/cocktail-manual-3.3.0-public/2.system-management/2.2.cluster/2.2.6-edit/" title="2.2.6 스토리지 편집" class="dd-item ">
        <a href="/cocktail-manual-3.3.0-public/2.system-management/2.2.cluster/2.2.6-edit/">
        2.2.6 스토리지 편집
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/cocktail-manual-3.3.0-public/2.system-management/2.2.cluster/2.2.7-delete/" title="2.2.7 스토리지 삭제" class="dd-item ">
        <a href="/cocktail-manual-3.3.0-public/2.system-management/2.2.cluster/2.2.7-delete/">
        2.2.7 스토리지 삭제
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/cocktail-manual-3.3.0-public/2.system-management/2.3.workspace/" title="2.3 워크스페이스" class="dd-item 
        
        
        
        ">
      <a href="/cocktail-manual-3.3.0-public/2.system-management/2.3.workspace/">
          2.3 워크스페이스
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/cocktail-manual-3.3.0-public/2.system-management/2.3.workspace/2.3.1-add/" title="2.3.1 워크스페이스 생성" class="dd-item ">
        <a href="/cocktail-manual-3.3.0-public/2.system-management/2.3.workspace/2.3.1-add/">
        2.3.1 워크스페이스 생성
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/cocktail-manual-3.3.0-public/2.system-management/2.3.workspace/2.3.2-edit/" title="2.3.2 워크스페이스 편집" class="dd-item ">
        <a href="/cocktail-manual-3.3.0-public/2.system-management/2.3.workspace/2.3.2-edit/">
        2.3.2 워크스페이스 편집
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/cocktail-manual-3.3.0-public/2.system-management/2.3.workspace/2.3.3-delete/" title="2.3.3 워크스페이스 삭제" class="dd-item ">
        <a href="/cocktail-manual-3.3.0-public/2.system-management/2.3.workspace/2.3.3-delete/">
        2.3.3 워크스페이스 삭제
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/cocktail-manual-3.3.0-public/3.dashboard/" title="대시보드" class="dd-item 
        
        
        
        ">
      <a href="/cocktail-manual-3.3.0-public/3.dashboard/">
          <b>3. </b>대시보드
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/cocktail-manual-3.3.0-public/3.dashboard/3.1-user/" title="3.1 사용자 관리" class="dd-item ">
        <a href="/cocktail-manual-3.3.0-public/3.dashboard/3.1-user/">
        3.1 사용자 관리
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/cocktail-manual-3.3.0-public/4.service/" title="서비스" class="dd-item 
        
        
        
        ">
      <a href="/cocktail-manual-3.3.0-public/4.service/">
          <b>4. </b>서비스
          
      </a>
      
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/cocktail-manual-3.3.0-public/5.build/" title="빌드 관리" class="dd-item 
        
        
        
        ">
      <a href="/cocktail-manual-3.3.0-public/5.build/">
          <b>5. </b>빌드 관리
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/cocktail-manual-3.3.0-public/5.build/5.1-add/" title="5.1 빌드 추가" class="dd-item ">
        <a href="/cocktail-manual-3.3.0-public/5.build/5.1-add/">
        5.1 빌드 추가
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/cocktail-manual-3.3.0-public/5.build/5.2-edit/" title="5.2 작업 설정 편집" class="dd-item ">
        <a href="/cocktail-manual-3.3.0-public/5.build/5.2-edit/">
        5.2 작업 설정 편집
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/cocktail-manual-3.3.0-public/5.build/5.3-history/" title="5.3 히스토리" class="dd-item ">
        <a href="/cocktail-manual-3.3.0-public/5.build/5.3-history/">
        5.3 히스토리
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/cocktail-manual-3.3.0-public/5.build/5.4-run/" title="5.4 빌드 실행" class="dd-item ">
        <a href="/cocktail-manual-3.3.0-public/5.build/5.4-run/">
        5.4 빌드 실행
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/cocktail-manual-3.3.0-public/5.build/5.5-cancel/" title="5.5 빌드 취소" class="dd-item ">
        <a href="/cocktail-manual-3.3.0-public/5.build/5.5-cancel/">
        5.5 빌드 취소
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/cocktail-manual-3.3.0-public/5.build/5.6-log/" title="5.6 로그 보기" class="dd-item ">
        <a href="/cocktail-manual-3.3.0-public/5.build/5.6-log/">
        5.6 로그 보기
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/cocktail-manual-3.3.0-public/5.build/5.7-delete/" title="5.7 작업 삭제" class="dd-item ">
        <a href="/cocktail-manual-3.3.0-public/5.build/5.7-delete/">
        5.7 작업 삭제
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/cocktail-manual-3.3.0-public/6.catalog/" title="카탈로그" class="dd-item 
        
        
        
        ">
      <a href="/cocktail-manual-3.3.0-public/6.catalog/">
          <b>6. </b>카탈로그
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/cocktail-manual-3.3.0-public/6.catalog/6.1-add/" title="6.1 카탈로그 저장" class="dd-item ">
        <a href="/cocktail-manual-3.3.0-public/6.catalog/6.1-add/">
        6.1 카탈로그 저장
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/cocktail-manual-3.3.0-public/6.catalog/6.2-deploy/" title="6.2 카탈로그 배포" class="dd-item ">
        <a href="/cocktail-manual-3.3.0-public/6.catalog/6.2-deploy/">
        6.2 카탈로그 배포
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/cocktail-manual-3.3.0-public/6.catalog/6.3-edit/" title="6.3 카탈로그 편집" class="dd-item ">
        <a href="/cocktail-manual-3.3.0-public/6.catalog/6.3-edit/">
        6.3 카탈로그 편집
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/cocktail-manual-3.3.0-public/6.catalog/6.4-delete/" title="6.4 카탈로그 삭제" class="dd-item ">
        <a href="/cocktail-manual-3.3.0-public/6.catalog/6.4-delete/">
        6.4 카탈로그 삭제
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/cocktail-manual-3.3.0-public/6.catalog/6.5-export/" title="6.5 카탈로그 내보내기" class="dd-item ">
        <a href="/cocktail-manual-3.3.0-public/6.catalog/6.5-export/">
        6.5 카탈로그 내보내기
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/cocktail-manual-3.3.0-public/6.catalog/6.6-import/" title="6.6 카탈로그 가져오기" class="dd-item ">
        <a href="/cocktail-manual-3.3.0-public/6.catalog/6.6-import/">
        6.6 카탈로그 가져오기
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/cocktail-manual-3.3.0-public/7.cluster/" title="클러스터" class="dd-item 
        
        
        
        ">
      <a href="/cocktail-manual-3.3.0-public/7.cluster/">
          <b>7. </b>클러스터
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/cocktail-manual-3.3.0-public/7.cluster/7.1-cluster/" title="7.1 클러스터 목록" class="dd-item ">
        <a href="/cocktail-manual-3.3.0-public/7.cluster/7.1-cluster/">
        7.1 클러스터 목록
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/cocktail-manual-3.3.0-public/7.cluster/7.2-node/" title="7.2 노드" class="dd-item ">
        <a href="/cocktail-manual-3.3.0-public/7.cluster/7.2-node/">
        7.2 노드
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/cocktail-manual-3.3.0-public/7.cluster/7.3-application/" title="7.3 서비스" class="dd-item ">
        <a href="/cocktail-manual-3.3.0-public/7.cluster/7.3-application/">
        7.3 서비스
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/cocktail-manual-3.3.0-public/7.cluster/7.4-volume/" title="7.4 볼륨" class="dd-item ">
        <a href="/cocktail-manual-3.3.0-public/7.cluster/7.4-volume/">
        7.4 볼륨
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/cocktail-manual-3.3.0-public/7.cluster/7.5-alarm/" title="7.5 알람" class="dd-item ">
        <a href="/cocktail-manual-3.3.0-public/7.cluster/7.5-alarm/">
        7.5 알람
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/cocktail-manual-3.3.0-public/7.cluster/7.5.1/" title="7.5.1 알람 목록" class="dd-item ">
        <a href="/cocktail-manual-3.3.0-public/7.cluster/7.5.1/">
        7.5.1 알람 목록
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/cocktail-manual-3.3.0-public/7.cluster/7.6-metering/" title="7.6 미터링" class="dd-item ">
        <a href="/cocktail-manual-3.3.0-public/7.cluster/7.6-metering/">
        7.6 미터링
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/cocktail-manual-3.3.0-public/7.cluster/7.7-registration/" title="7.7 등록정보" class="dd-item ">
        <a href="/cocktail-manual-3.3.0-public/7.cluster/7.7-registration/">
        7.7 등록정보
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/cocktail-manual-3.3.0-public/8.operation/" title="시스템 운영" class="dd-item 
        parent
        
        
        ">
      <a href="/cocktail-manual-3.3.0-public/8.operation/">
          <b>8. </b>시스템 운영
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/cocktail-manual-3.3.0-public/8.operation/8.1.cluster-install/" title="8.1 클러스터 구성 및 등록" class="dd-item 
        parent
        
        
        ">
      <a href="/cocktail-manual-3.3.0-public/8.operation/8.1.cluster-install/">
          8.1 클러스터 구성 및 등록
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/cocktail-manual-3.3.0-public/8.operation/8.1.cluster-install/8.1.1.kass/" title="8.1.1 클러스터 서비스 사용" class="dd-item 
        parent
        
        
        ">
      <a href="/cocktail-manual-3.3.0-public/8.operation/8.1.cluster-install/8.1.1.kass/">
          8.1.1 클러스터 서비스 사용
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/cocktail-manual-3.3.0-public/8.operation/8.1.cluster-install/8.1.1.kass/8.1.1.1-cluster-kass-gke/" title="8.1.1.1 GKE 클러스터 만들기" class="dd-item ">
        <a href="/cocktail-manual-3.3.0-public/8.operation/8.1.cluster-install/8.1.1.kass/8.1.1.1-cluster-kass-gke/">
        8.1.1.1 GKE 클러스터 만들기
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/cocktail-manual-3.3.0-public/8.operation/8.1.cluster-install/8.1.1.kass/8.1.1.2-cluster-kass-aks/" title="8.1.1.2 AKS 클러스터 만들기" class="dd-item ">
        <a href="/cocktail-manual-3.3.0-public/8.operation/8.1.cluster-install/8.1.1.kass/8.1.1.2-cluster-kass-aks/">
        8.1.1.2 AKS 클러스터 만들기
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/cocktail-manual-3.3.0-public/8.operation/8.1.cluster-install/8.1.1.kass/8.1.1.3-cluster-kass-eks/" title="8.1.1.3 EKS 클러스터 만들기" class="dd-item active">
        <a href="/cocktail-manual-3.3.0-public/8.operation/8.1.cluster-install/8.1.1.kass/8.1.1.3-cluster-kass-eks/">
        8.1.1.3 EKS 클러스터 만들기
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/cocktail-manual-3.3.0-public/8.operation/8.1.cluster-install/8.1.1.kass/8.1.1.4-cluster-kass-eks-policy/" title="8.1.1.3 EKS 클러스터 정책 / 권한" class="dd-item ">
        <a href="/cocktail-manual-3.3.0-public/8.operation/8.1.cluster-install/8.1.1.kass/8.1.1.4-cluster-kass-eks-policy/">
        8.1.1.3 EKS 클러스터 정책 / 권한
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/cocktail-manual-3.3.0-public/8.operation/8.1.cluster-install/8.1.1.kass/8.1.1.5-cluster-kass-eks-quick-start/" title="8.1.1.5 EKS 클러스터 만들기 Quick Start" class="dd-item ">
        <a href="/cocktail-manual-3.3.0-public/8.operation/8.1.cluster-install/8.1.1.kass/8.1.1.5-cluster-kass-eks-quick-start/">
        8.1.1.5 EKS 클러스터 만들기 Quick Start
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/cocktail-manual-3.3.0-public/8.operation/8.1.cluster-install/8.1.2.onpremise/" title="8.1.2 클러스터 직접 구성" class="dd-item 
        
        
        
        ">
      <a href="/cocktail-manual-3.3.0-public/8.operation/8.1.cluster-install/8.1.2.onpremise/">
          8.1.2 클러스터 직접 구성
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/cocktail-manual-3.3.0-public/8.operation/8.1.cluster-install/8.1.2.onpremise/8.1.2-cluster-on-premise/" title="8.1.2.1 클러스터 직접 구성" class="dd-item ">
        <a href="/cocktail-manual-3.3.0-public/8.operation/8.1.cluster-install/8.1.2.onpremise/8.1.2-cluster-on-premise/">
        8.1.2.1 클러스터 직접 구성
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/cocktail-manual-3.3.0-public/9.member/" title="구성원" class="dd-item 
        
        
        
        ">
      <a href="/cocktail-manual-3.3.0-public/9.member/">
          <b>9. </b>구성원
          
      </a>
      
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/cocktail-manual-3.3.0-public/10.terminology/" title="용어설명" class="dd-item 
        
        
        
        ">
      <a href="/cocktail-manual-3.3.0-public/10.terminology/">
          <b>10. </b>용어설명
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/cocktail-manual-3.3.0-public/10.terminology/10.1-kubenetes/" title="10.1 Kubernetes(k8s)" class="dd-item ">
        <a href="/cocktail-manual-3.3.0-public/10.terminology/10.1-kubenetes/">
        10.1 Kubernetes(k8s)
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/cocktail-manual-3.3.0-public/10.terminology/10.2-system/" title="10.2 Cocktail Cloud" class="dd-item ">
        <a href="/cocktail-manual-3.3.0-public/10.terminology/10.2-system/">
        10.2 Cocktail Cloud
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/cocktail-manual-3.3.0-public/10.terminology/10.3-error-code/" title="10.3 Cocktail Cloud System Error Code" class="dd-item ">
        <a href="/cocktail-manual-3.3.0-public/10.terminology/10.3-error-code/">
        10.3 Cocktail Cloud System Error Code
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/cocktail-manual-3.3.0-public/11.support/" title="고객지원 서비스" class="dd-item 
        
        
        
        ">
      <a href="/cocktail-manual-3.3.0-public/11.support/">
          <b>11. </b>고객지원 서비스
          
      </a>
      
              
    </li>
  
 

          
         
    </ul>

    
    

    
    <section id="footer">
      
    
    

    
    

    
    

    




    </section>
  </div>
</nav>





        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            
            
          
          
            
            
          
          
            <a href='/cocktail-manual-3.3.0-public/'>칵테일 클라우드</a> > <a href='/cocktail-manual-3.3.0-public/8.operation/'>시스템 운영</a> > <a href='/cocktail-manual-3.3.0-public/8.operation/8.1.cluster-install/'>8.1 클러스터 구성 및 등록</a> > <a href='/cocktail-manual-3.3.0-public/8.operation/8.1.cluster-install/8.1.1.kass/'>8.1.1 클러스터 서비스 사용</a> > 8.1.1.3 EKS 클러스터 만들기
          
         
          
         
          
         
          
         
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#8-1-1-3-eks-클러스터-만들기-quick-start-8-1-1-5"><a href="../8.1.1.5">8.1.1.3 EKS 클러스터 만들기 Quick Start</a></a></li>
</ul></li>
<li><a href="#eks-클러스터를-배포하는-방법">EKS 클러스터를 배포하는 방법.</a>
<ul>
<li><a href="#amazon-eks에-로그인">Amazon Eks에 로그인</a></li>
<li><a href="#amazon-eks-필수-조건">Amazon EKS 필수 조건</a></li>
<li><a href="#aws-eks-클러스터-만들기">AWS EKS 클러스터 만들기</a></li>
<li><a href="#1-aws-리소스-생성-시-수임할-수-있는-iam-역할을-생성-합니다">1. AWS 리소스 생성 시 수임할 수 있는 IAM 역할을 생성 합니다.</a></li>
<li><a href="#2-amazon-eks-클러스터-vpc-생성-cloudformation-콘솔-사용해서-생성">2. Amazon EKS 클러스터 VPC 생성 - CloudFormation 콘솔 사용해서 생성</a></li>
<li><a href="#3-amazon-eks에-대한-kubectl을-설치합니다">3. Amazon EKS에 대한 kubectl을 설치합니다.</a></li>
<li><a href="#3-1-amazon-eks용-aws-iam-authenticator를-설치합니다">3-1. Amazon EKS용 aws-iam-authenticator를 설치합니다.</a></li>
<li><a href="#3-2-선택-사항-최신-aws-cli-다운로드-및-설치-합니다">3-2. (선택 사항) 최신 AWS CLI 다운로드 및 설치 합니다.</a></li>
<li><a href="#4-1단계-amazon-eks-클러스터-생성">4. 1단계: Amazon EKS 클러스터 생성</a></li>
<li><a href="#4-1-amazon-eks용-kubectl-구성">4-1. Amazon EKS용 kubectl 구성</a></li>
<li><a href="#5-2단계-amazon-eks-work-node-시작-및-구성">5. 2단계: Amazon EKS Work node 시작 및 구성</a></li>
<li><a href="#5-1-템플릿을-사용해서-work-node를-시작하려면">5-1. 템플릿을 사용해서 Work node를 시작하려면</a></li>
<li><a href="#5-2-work-node가-클러스터에-조인하도록-하려면">5-2. Work node가 클러스터에 조인하도록 하려면</a></li>
</ul></li>
<li><a href="#amazon-elastic-file-system-만들기">Amazon Elastic File System 만들기</a>
<ul>
<li><a href="#1-보안그룹-생성">1. 보안그룹 생성</a></li>
<li><a href="#2-amazon-efs-파일-시스템-생성">2. Amazon EFS 파일 시스템 생성</a></li>
<li><a href="#4-efs-persistent-volumes-on-kubernetes-on-aws">4. EFS Persistent Volumes on Kubernetes on AWS</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              8.1.1.3 EKS 클러스터 만들기
            </h1>
          

        





<h3 id="8-1-1-3-eks-클러스터-만들기-quick-start-8-1-1-5"><a href="../8.1.1.5">8.1.1.3 EKS 클러스터 만들기 Quick Start</a></h3>

<hr />

<h2 id="eks-클러스터를-배포하는-방법">EKS 클러스터를 배포하는 방법.</h2>

<p>Kubernetes 용 Amazon Elastic Container Service (Amazon EKS)를 사용하면 AWS의 Kubernetes를 사용하여 컨테이너 화 된 응용 프로그램을 쉽게 배포, 관리 및 확장 할 수 있다.</p>

<p><strong>참조 : <a href="https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/what-is-eks.html">Amazon Elastic Container Service for Kubernetes(EKS) 클러스터 배포</a></strong></p>

<h3 id="amazon-eks에-로그인">Amazon Eks에 로그인</h3>

<ul>
<li><a href="https://aws.amazon.com/eks/">Amazon Eks</a>에 로그인.</li>
</ul>

<h3 id="amazon-eks-필수-조건">Amazon EKS 필수 조건</h3>

<ul>
<li><p>Amazon EKS 클러스터를 생성하기 전에 Kubernetes가 AWS 리소스 생성 시 수임할 수 있는 IAM 역할을 생성해야 한다.</p></li>

<li><p>AWS 관리자 권한이 없다면 필요한 역할 / 정책 / 권한 을 요청 해야 합니다.<br />
참조 : <a href="../8.1.1.4">EKS 관리 권한 / 정책</a></p></li>
</ul>

<!--

### 1. 사용자 권한 / 정책
사용자가 클러스터를 생성 / 관리할 수 있는 권한 / 정책이 필요 합니다.

  * **CloudFormation** - 전체: 목록, 쓰기 제한: 읽기 / 이에 사용되는 리소스 권한이 있어야 합니다.  
  AWS CloudFormation은 개발자와 시스템 관리자에게 관련 AWS 리소스 모음을 손쉽게 생성 및 관리하고 순서 있고 예측 가능한 방식으로 프로비저닝하고 업데이트 할 수있는 방법을 제공합니다.

  * **EC2** -  AmazonEC2FullAccess 권한이 있어야 합니다.  
  Amazon Elastic Compute Cloud (Amazon EC2)는 클라우드에서 안전하고 크기 조정이 가능한 컴퓨팅 용량을 제공하는 웹 서비스입니다.

  * **EKS** - 모든 액세스 / 모든 리소스 권한이 있어야 합니다.  
  Amazon Elastic Container Service for Kubernetes (EKS)는 자체 Kubernetes control plane을 설치, 작동 및 유지할 필요없이 Kubernetes를 AWS에서 쉽게 실행할 수 있도록 관리되는 Kubernetes 서비스입니다.

  * **IAM** - 목록, 읽기, 쓰기, 권한 관리 / 이에 사용되는 리소스 권한이 있어야 합니다.  
  AWS Identity and Access Management (IAM)를 사용하면 AWS 서비스 및 리소스에 대한 액세스를 안전하게 관리합니다.

  * **SNS** - 목록 / 모든 리소스 권한이 있어야 합니다.  
  Amazon Simple Notification Service(SNS)는 마이크로서비스, 분산 시스템 및 서버리스 애플리케이션을 쉽게 분리할 수 있게 해 주는 내구적이고 안전한 고가용성의 완전 관리형 게시/구독 메시징 서비스입니다

  * **VPC** - AWS Management Console을 통해 Amazon VPC에 대한 완벽한 액세스를 제공합니다.  
  Amazon Virtual Private Cloud(Amazon VPC)에서는 사용자가 정의한 가상 네트워크로 AWS 리소스를 시작할 수 있습니다.

### 2. 사용자 권한 / 정책 만들기

  * [IAM(Identity and Access Management)](https://console.aws.amazon.com/iam) 에서 정책(Policies)을 선택합니다.  

    * 정책 생성(Create policy) / 기존의 정책 편집(Edit policy)을 선택합니다.

      * 권한 추가(Add additional permissions)를 선택합니다.  

        * 서비스 항목에서 필요한 서비스를 검색 / 선택합니다.

        * **CloudFormation** - 목록 에서 액세스 레벨 / 리소스 에서 필요한 권한을 선택합니다.  
          AWS CloudFormation은 Amazon Web Services 리소스를 모델링하고 설정하는 데 도움이되는 서비스로, 리소스 관리 시간을 줄이고 AWS에서 실행되는 애플리케이션에 집중할 수 있습니다.  
          원하는 모든 AWS 리소스 (예 : Amazon EC2 인스턴스 또는 Amazon RDS DB 인스턴스)를 설명하는 템플릿을 만들고 AWS CloudFormation은 이러한 리소스를 프로비저닝하고 구성하는 작업을 담당합니다.  
          AWS 리소스를 개별적으로 생성하고 구성 할 필요가 없으며 무엇에 의존하는지 파악할 수 있습니다. [Learn more](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/)  

            ![eks-in-seoul](/cocktail-manual-3.3.0-public/images/assets/KR/3.1.1/EKS/eks-create-policies-CloudFormation-1.png)
            ![eks-in-seoul](/cocktail-manual-3.3.0-public/images/assets/KR/3.1.1/EKS/eks-create-policies-CloudFormation-2.png)
            ![eks-in-seoul](/cocktail-manual-3.3.0-public/images/assets/KR/3.1.1/EKS/eks-create-policies-CloudFormation-3.png)

        * **EKS** - 목록 에서 액세스 레벨 / 리소스 에서 필요한 권한을 선택합니다.  
          Kubernetes 용 Amazon Elastic Container Service (Amazon EKS)는 자체 Kubernetes control plane을 세우거나 유지할 필요없이 AWS에서 Kubernetes를 쉽게 실행할 수 있도록 해주는 관리 형 서비스입니다.  

            ![eks-in-seoul](/cocktail-manual-3.3.0-public/images/assets/KR/3.1.1/EKS/eks-create-policies-EKS-1.png)

        * **IAM** - 목록 에서 액세스 레벨 / 리소스 에서 필요한 권한을 선택합니다.  
          AWS ID 및 액세스 관리 (IAM)는 AWS 리소스에 대한 액세스를 안전하게 제어 할 수있는 웹 서비스입니다.  
          IAM을 사용하여 자원을 사용하도록 인증 (로그인)되고 권한이 부여 된 (사용 권한이있는) 사용자를 제어합니다.  

            ![eks-in-seoul](/cocktail-manual-3.3.0-public/images/assets/KR/3.1.1/EKS/eks-create-policies-IAM-1.png)

        * **SNS** - 목록 에서 액세스 레벨 / 리소스 에서 필요한 권한을 선택합니다.  
          Amazon SNS (Amazon Simple Notification Service)는 가입 엔드 포인트 또는 클라이언트로 메시지를 전달하거나 메시지 서비스를 조정 및 관리하는 웹 서비스입니다.  
          게시자는 논리 액세스 포인트 및 통신 채널 인 주제에 메시지를 생성하고 전송하여 구독자와 비동기 적으로 통신합니다.  

            ![eks-in-seoul](/cocktail-manual-3.3.0-public/images/assets/KR/3.1.1/EKS/eks-create-policies-SNS-1.png)

    * 정책 검토(Review policy)를 선택합니다.

        * 이름(Name) :  
        AmazonEKSAdminPolicy와 같은 사용자 정책 이름을 입력 합니다.

        * 설명(Description) :  
        사용자 정책의 설명을 입력 합니다.  
    
    * 정책 생성을 선택합니다.

* [IAM(Identity and Access Management)](https://console.aws.amazon.com/iam) 에서 사용자(Users)를 선택합니다.  

    * 생성한 또는 편집한 정책을 사용자에게 추가 합니다.

        * 권한 추가(Add permission)를 선택합니다.

        * 기존 정책 직접 연결(Attach existing policies directly )을 선택합니다.

            * 생성 및 편집 한 정책을 검색 해서 사용자에게 권한 추가 합니다.

            * 이 사용 설명서 에서는 다음 과 같은 정책으로 사용 하였습니다.

                * **AmazonEKSAdminPolicy** :  
                    CloudFormation, EKS, IAM, SNS

                * **AmazonVPCFullAccess** :  
                    Provides full access to Amazon VPC via the AWS Management Console.  
                    Amazon EC2를 사용하여 필요한만큼 가상 서버를 시작하고 보안 및 네트워킹을 구성하며 스토리지를 관리 할 수 있습니다.  

                * **AmazonEC2FullAccess** :  
                    Provides full access to Amazon EC2 via the AWS Management Console.  
                    Amazon Elastic Compute Cloud (Amazon EC2)는 Amazon Web Services (AWS) 클라우드에서 확장 가능한 컴퓨팅 용량을 제공합니다.  
                    Amazon EC2를 사용하여 필요한만큼 가상 서버를 시작하고 보안 및 네트워킹을 구성하며 스토리지를 관리 할 수 있습니다.  


    이 사용 설명서에서는 아래와 같이 권한을 사용합니다.
    ![eks-in-seoul](/cocktail-manual-3.3.0-public/images/assets/KR/3.1.1/EKS/eks-create-user-policies-1.png)

-->

<h3 id="aws-eks-클러스터-만들기">AWS EKS 클러스터 만들기</h3>

<p>Kubernetes 용 Amazon Elastic Container Service (Amazon EKS)는 AWS에서 Kubernetes를 쉽게 실행할 수 있도록 해주는 관리 형 서비스입니다.</p>

<h3 id="1-aws-리소스-생성-시-수임할-수-있는-iam-역할을-생성-합니다">1. AWS 리소스 생성 시 수임할 수 있는 IAM 역할을 생성 합니다.</h3>

<p><strong>관리자 권한 또는 해당 IAM 권한이 필요 합니다.</strong></p>

<ul>
<li><p><strong>[Roles(역할)]</strong>를 선택한 다음 <strong>[Create role]</strong>을 선택합니다.</p>

<ul>
<li><p>서비스 목록에서 EKS를 선택합니다.</p></li>

<li><p>사용 사례에 대해 Allows Amazon EKS to manage your clusters on your behalf(EKS에서 사용자를 대신하여 클러스터를 관리하도록 허용)를 선택합니다.</p></li>
</ul></li>

<li><p><strong>[Next: Permissions(다음: 권한)]</strong>를 선택합니다.</p>

<ul>
<li><p><strong>AmazonEKSClusterPolicy</strong> :<br />
이 정책은 Kubernetes에게 사용자를 대신하여 리소스를 관리하는 데 필요한 권한을 제공합니다.<br />
Kubernetes는 인스턴스, 보안 그룹 및 탄력적인 네트워크 인터페이스를 포함하되 이에 국한되지 않는 EC2 리소스에 대한 식별 정보를 배치하는 데 Ec2 : CreateTags 권한이 필요합니다.</p></li>

<li><p><strong>AmazonEKSServicePolicy</strong> :<br />
이 정책에 따라 Kubernetes 용 Amazon Elastic Container Service는 EKS 클러스터를 운영하는 데 필요한 리소스를 만들고 관리 할 수 있습니다.</p></li>
</ul></li>

<li><p><strong>[Next: Tags(다음: 태그)]</strong>를 선택합니다.<br />
IAM 태그는 사용자 역할에 추가할 수 있는 키-값 페어입니다.<br />
태그는 이메일 주소와 같은 사용자 정보를 포함하거나 직책과 같은 내용일 수 있습니다. 태그를 사용하여 이 역할에 대한 액세스를 구성, 추적 또는 제어할 수 있습니다. <a href="http://docs.aws.amazon.com/console/iam/roles-tagging">Learn more</a></p></li>

<li><p><strong>[Next: Review(다음: 검토)]</strong>를 선택합니다.<br />
생성하기 전에 아래에 필요한 정보를 입력하고 이 역할을 검토하십시오.</p>

<ul>
<li>Role name(역할 이름)에서 역할에 대한 고유 이름(예: eksServiceRole)을 입력합니다.<br />
<br /></li>
</ul></li>

<li><p><strong>Create role(역할 생성 만들기)</strong>을 선택합니다.</p></li>

<li><p>만들어진 역할을 확인 합니다.</p>

<ul>
<li><strong>[Roles(역할)]</strong>를 선택 :<br />
목록에서 새로 생성한 Role(역할)을 확인할 수 있습니다.</li>
</ul></li>
</ul>

<p><img src="/cocktail-manual-3.3.0-public/images/assets/KR/3.1.1/EKS/eks-create-role-1.png" alt="eks-in-seoul" />
  <img src="/cocktail-manual-3.3.0-public/images/assets/KR/3.1.1/EKS/eks-create-role-2.png" alt="eks-in-seoul" />
  <img src="/cocktail-manual-3.3.0-public/images/assets/KR/3.1.1/EKS/eks-create-role-3.png" alt="eks-in-seoul" />
  <img src="/cocktail-manual-3.3.0-public/images/assets/KR/3.1.1/EKS/eks-create-role-4.png" alt="eks-in-seoul" /></p>

<!-- ### 2. Amazon EKS 클러스터 VPC 생성 - 직접 생성(권장)
이 사용 설명서에서는 직접 생성을 선택 합니다.  

  * 상단 서비스(Services)를 선택 VPC Service를 선택합니다.

  * 상단 리전 모음에서 Amazon EKS를 지원하는 리전을 선택합니다.  
    이 사용 설명서에서는 서울 리전을 사용합니다.

  * VPC 만들기(Launch VPC Wizard)를 선택합니다.
    
    * 1단계: VPC 구성 선택(Step 1: Select a VPC Configuration) :  
      이 사용 설명서에서는 단일 퍼블릭 서브넷을 선택합니다.

      * 단일 퍼블릭 서브넷이 있는 VPC :  
        고객의 인스턴스는 AWS 클라우드의 프라이빗 격리 섹션에서 실행되며 인터넷에 직접 액세스합니다.  
        네트워크 액세스 제어 목록 및 보안 그룹을 사용하여 인스턴스를 드나드는 인바운드 및 아웃바운드 네트워크 트래픽을 엄격히 제어할 수 있습니다.  

      * 퍼블릭 및 프라이빗 서브넷이 있는 VPC :  
        이 구성은 퍼블릿 서브넷을 포함하는 이외에 인터넷에서 인스턴스의 주소를 지정할 수 없는 프라이빗 서브넷을 추가합니다.  
        프라이빗 서브넷의 인스턴스는 NAT(Network Address Translation)를 사용하는 퍼블릭 서브넷을 통해 인터넷과 아웃바운드 연결을 설정할 수 있습니다.  

      * 퍼블릭 및 프라이빗 서브넷이 있고 하드웨어 VPN 액세스를 제공하는 VPC :  
        이 구성은 Amazon VPC와 데이터 센터 사이에 IPsec 가상 프라이빗 네트워크(VPN) 연결을 추가하여 데이터 센터를 효과적으로 클라우드까지 확장하는 한편 Amazon VPC의 퍼블릭 서브넷 인스턴스에게 직접 인터넷 액세스를 제공합니다.  

      * 프라이빗 서브넷만 있고 하드웨어 VPN 액세스를 제공하는 VPC :  
        고객의 인스턴스가 AWS 클라우드의 프라이빗 격리 섹션에서 실행되고 인터넷에서 인스턴스의 주소를 지정할 수 없는 프라이빗 서브넷이 포함됩니다.  
        이 프라이빗 서브넷을 IPsec 가상 프라이빗 네트워크(VPN) 터널을 통해 기업 데이터 센터에 연결할 수 있습니다.  

    ![eks-in-seoul](/cocktail-manual-3.3.0-public/images/assets/KR/3.1.1/EKS/eks-create-vpc-1.png)

    * 2단계: 단일 퍼블릭 서브넷이 있는 VPC

      * IPv4 CIDR 블록(필수항목) : (65531 IP 주소 사용 가능)  
        이 사용 설명서에서는 기본 값을 사용합니다. - 10.0.0.0/16

      * IPv6 CIDR 블록 :  
        이 사용 설명서에서는 기본 값을 사용합니다. - Pv6 CIDR 블록 없음
      
      * VPC 이름 :  
        VPC에 고유 이름을 부여합니다  
        이 사용 설명서에서는 cocktail-eks-test-vpc 글 사용합니다.

      * 퍼블릭 서브넷의 IPv4 CIDR(필수항목) : (251 IP 주소 사용 가능)  
        이 사용 설명서에서는 기본 값을 사용합니다. - 10.0.0.0/24

      * 가용 영역(Availability Zone)(필수항목) :  
        리전에서 사용 되는 가용 영역을 선택합니다.  
        이 사용 설명서에서는 ap-northeast-2a, ap-northeast-2c를 사용합니다.  
      
      * 서브넷 이름(Subnet name) :  
        AWS가 VPC를 생성한 후 더 많은 서브넷을 추가할 수 있습니다.  
        이 사용 설명서에서는 cocktail-test-subnet-01, cocktail-test-subnet-02 2개를 사용합니다.  
        Subnet 추가 섹션을 참조 하세요. 참조 : [클러스터 VPC 고려 사항](https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/network_reqs.html)  

      * 서비스 엔드포인트(Service endpoints) :  
        이 사용 설명서에서는 기본 값을 사용합니다.  

      * DNS 호스트 이름 활성화 :  
        이 사용 설명서에서는 기본 값을 사용합니다. - 예(Yes)

      * 하드웨어 테넌시 :  
        이 사용 설명서에서는 기본 값을 사용합니다. - 기본값(Default)
    
    * 하단 VPC 만들기를 선택합니다.

    * VPC 생성되면 확인을 선택합니다.

  * Your VPCs 화면 목록에서 생성된 VPC를 확일 할 수 있습니다.

  ![eks-in-seoul](/cocktail-manual-3.3.0-public/images/assets/KR/3.1.1/EKS/eks-create-vpc-2.png)
  ![eks-in-seoul](/cocktail-manual-3.3.0-public/images/assets/KR/3.1.1/EKS/eks-create-vpc-3.png)  

### 2-1. 서브넷(Subnets) 만들기
Amazon EKS 클러스터를 생성할 때 클러스터가 사용할 Amazon VPC 서브넷을 지정합니다.  
**Amazon EKS의 경우 2개 이상의 다른 가용 영역에서 서브넷이 필요합니다.**  
내부에서 인터넷 경계 로드 밸런서를 생성하려면 작업자 노드에 대해 프라이빗 서브넷을 사용하고 Kubernetes에 대해 퍼블릭 서브넷을 사용하는 네트워크 아키텍처를 권장합니다.  
클러스터를 만들 때 해당 클러스터를 위해 리소스를 호스팅할 모든 서브넷을 지정합니다(예: 작업자 노드와 로드 밸런서).

  * VPC Service에서 서브넷(Subnets)를 선택합니다.

    * 서브넷 생성(Create subnet)을 선택합니다.

      * Name 태그(Name tag) :  
        'Name' 키와 사용자가 지정하는 값을 포함하는 태그를 생성 합니다.  
        이 사용 설명서에서는 cocktail-test-subnet-01, cocktail-test-subnet-02를 사용합니다.
      
      * VPC(필수항목) :  
        생성한 VPC를 선택합니다.

      * 가용 영역(Availability Zone)(필수항목) :  
      이 서브넷이 위치할 가용 영역입니다. Amazon에서 가용 영역을 선택하도록 하려면 기본 설정 없음을 선택합니다.  
      이 사용 설명서에서는 ap-northeast-2a, ap-northeast-2c를 선택합니다.

      * IPv4 CIDR 블록(필수항목) :  
        서브넷에 대한 IP 주소의 범위를 나타내는 CIDR블록(예: 10.0.1.0/24).  
        블록 크기는 /16 ~ /28 넷마스크여야 하며, VPC의 서브넷이거나 동일한 크기일 수 있습니다.  
        이 사용 설명서에서는 10.0.1.0/24, 10.0.2.0/24를 사용합니다.
    
    * 생성(Create)을 선택합니다.

    * 정상 생성 되면 닫기를 선택 합니다.

  * VPC Service 의 서브넷(Subnets) 화면에서 확인할 수 있습니다.

  ![eks-in-seoul](/cocktail-manual-3.3.0-public/images/assets/KR/3.1.1/EKS/eks-create-subnet-1.png)
  ![eks-in-seoul](/cocktail-manual-3.3.0-public/images/assets/KR/3.1.1/EKS/eks-create-subnet-2.png)

### 2-2. 보안 그룹(Security Groups) 만들기
보안 그룹은 인바운드 및 아웃 바운드 트래픽을 제어하기위한 인스턴스의 가상 방화벽 역할을합니다.

* AWS VPC service 화면에서 보안 그룹을 선택합니다.

    * Create security group를 선택합니다.  


        * Security group name :  
        이 사용 설명서에서는 cocktail-eks-test-security-group를 사용합니다.

        * Description :  
        간략한 설명을 입력 합니다.

        * VPC :  
        보안그룹을 사용 할 VPC를 선택 합니다.
    
    * Create를 선택합니다.

    ![eks-create-security-group-1](/cocktail-manual-3.3.0-public/images/assets/KR/3.1.1/EKS/eks-create-security-group-1.png)
 -->

<h3 id="2-amazon-eks-클러스터-vpc-생성-cloudformation-콘솔-사용해서-생성">2. Amazon EKS 클러스터 VPC 생성 - CloudFormation 콘솔 사용해서 생성</h3>

<p>참조 : AWS <a href="https://docs.aws.amazon.com/eks/latest/userguide/getting-started.html">사용 설명서</a>를 참조.</p>

<ul>
<li><p><a href="https://console.aws.amazon.com/cloudformation">https://console.aws.amazon.com/cloudformation</a>에서 AWS CloudFormation 콘솔에서 제공 되는 템플릿을 사용해서 생성.</p></li>

<li><p>상단 리전 모음에서 Amazon EKS를 지원하는 리전을 선택.</p>

<p><strong>참고</strong><br />
현재 다음 리전에서 Amazon EKS를 사용할 수 있습니다. (한국어 사용 설명서는 아직 반영이 안되어 있다.)</p>

<ul>
<li><p><strong>US West (Oregon)</strong> (us-west-2)</p></li>

<li><p><strong>US East (N. Virginia)</strong> (us-east-1)</p></li>

<li><p><strong>US East (Ohio)</strong> (us-east-2)</p></li>

<li><p><strong>EU (Frankfurt)</strong> (eu-central-1)</p></li>

<li><p><strong>EU (Stockholm)</strong> (eu-north-1)</p></li>

<li><p><strong>EU (Ireland)</strong> (eu-west-1)</p></li>

<li><p><strong>Asia Pacific (Tokyo)</strong> (ap-northeast-1)</p></li>

<li><p><strong>Asia Pacific (Seoul)</strong> (ap-northeast-2)</p></li>

<li><p><strong>Asia Pacific (Singapore)</strong> (ap-southeast-1)</p></li>

<li><p><strong>Asia Pacific (Sydney)</strong> (ap-southeast-2)</p></li>
</ul></li>

<li><p>[Create stack]을 선택.</p></li>

<li><p>템플릿 선택에서 Amazon S3 템플릿 URL 지정을 선택.</p>

<pre><code class="language-yaml">https://amazon-eks.s3-us-west-2.amazonaws.com/cloudformation/2019-02-11/amazon-eks-vpc-sample.yaml

</code></pre>

<p><strong>주의 :</strong> 2019-01-09 이전 날짜의 템플릿파일을 서울리전에서 사용시 오류가 있다. (AZ가 없는 관계로)</p>

<ul>
<li><p>스택 이름: AWS CloudFormation 스택에 대한 스택 이름을 선택합니다. 예를 들어 eks-vpc로 사용할 수 있다.</p></li>

<li><p>VpcBlock: VPC에 대한 CIDR 범위를 선택합니다. 기본값을 유지할 수 있다.</p></li>

<li><p>Subnet01Block: 서브넷 1에 대한 CIDR 범위를 선택합니다. 기본값을 유지할 수 있다.</p></li>

<li><p>Subnet02Block: 서브넷 2에 대한 CIDR 범위를 선택합니다. 기본값을 유지할 수 있다.</p></li>

<li><p>Subnet03Block: 서브넷 3에 대한 CIDR 범위를 선택합니다. 기본값을 유지할 수 있다.</p></li>
</ul></li>

<li><p>(선택 사항) 옵션 페이지에서 스택 리소스에 태그를 지정합니다. <strong>[Next]</strong>를 선택.</p></li>

<li><p>[Review] 페이지에서 <strong>[Create]</strong>을 선택합니다.</p></li>

<li><p>스택이 생성된 후 콘솔에서 이를 선택하고 <strong>출력</strong>을 선택합니다.</p></li>

<li><p>생성된 보안 그룹에 대한 <strong>SecurityGroups</strong> 값을 기록합니다. 이 값은 EKS 클러스터를 생성할 때 필요합니다. 이 보안 그룹은 서브넷에 생성된 계정 간 탄력적 네트워크 인터페이스에 적용되고, 이를 통해 Amazon EKS 제어 플레인이 작업자 노드와 통신할 수 있습니다.</p></li>

<li><p>생성된 VPC의 <strong>VpcId를</strong> 기록합니다. 작업자 노드 그룹 템플릿을 시작할 때 필요합니다.</p></li>

<li><p>생성된 서브넷에 대한 <strong>SubnetIds를</strong> 기록합니다. EKS 클러스터를 생성할 때 필요합니다. 작업자 노드가 시작되는 서브넷입니다.</p></li>
</ul>

<p><img src="/cocktail-manual-3.3.0-public/images/assets/KR/3.1.1/EKS/eks-create-cloudformation-vpc-1-1.png" alt="eks-create-cloudformation-vpc-1-1" />
<img src="/cocktail-manual-3.3.0-public/images/assets/KR/3.1.1/EKS/eks-create-cloudformation-vpc-2-1.png" alt="eks-create-cloudformation-vpc-2-1" /></p>

<h3 id="3-amazon-eks에-대한-kubectl을-설치합니다">3. Amazon EKS에 대한 kubectl을 설치합니다.</h3>

<p>Amazon EKS는 IAM을 사용하여 <a href="https://github.com/kubernetes-sigs/aws-iam-authenticator">Kubernetes용 AWS IAM Authenticator</a>를 통해 Kubernetes 클러스터에 인증을 제공합니다.<br />
Kubernetes 버전 1.10부터 Kubernetes용 AWS IAM Authenticator를 설치하고 인증에 사용할 kubectl 구성 파일을 사용하여 Amazon EKS를 사용할 stock kubectl 클라이언트를 구성할 수 있습니다.<br />
참조 : <a href="https://docs.aws.amazon.com/eks/latest/userguide/install-kubectl.html">https://docs.aws.amazon.com/eks/latest/userguide/install-kubectl.html</a><br />
참조: kubectl 설치 : <a href="https://kubernetes.io/docs/tasks/tools/install-kubectl/">https://kubernetes.io/docs/tasks/tools/install-kubectl/</a></p>

<ul>
<li><p>Kubernetes 용 AWS IAM Authenticator는 AWS에서 Kubernetes 설치 프로그램을 작성하는 경우 부트 스트랩 프로세스를 간소화 할 수 있습니다.</p></li>

<li><p>새로 설치 한 클러스터에서 초기 admin 자격 증명을 어떻게 든 안전하게 훔쳐 낼 필요가 없습니다.</p></li>

<li><p>대신 클러스터 구축시 전용 KubernetesAdmin 역할을 만들고 Authenticator를 설정하여 클러스터 관리자 로그인을 허용 할 수 있습니다.</p></li>
</ul>

<h3 id="3-1-amazon-eks용-aws-iam-authenticator를-설치합니다">3-1. Amazon EKS용 aws-iam-authenticator를 설치합니다.</h3>

<p>Kubernetes 클러스터에 인증하기 위해 AWS IAM 자격 증명을 사용하는 도구 입니다.
Kubernetes 용 AWS IAM Authenticator를 사용하면 Kubernetes 액세스에 대한 별도의 자격 증명을 관리하지 않아도됩니다.</p>

<ul>
<li><p><strong>aws-iam-authenticator</strong> 바이너리를 다운로드 및 설치합니다.<br />
Amazon EKS는 사용할 수 있는 aws-iam-authenticator 바이너리를 판매합니다.<br />
또는 go get 을 사용하여 GitHub의 <a href="https://github.com/kubernetes-sigs/aws-iam-authenticator">Kubernetes용 AWS IAM Authenticator</a> 프로젝트에서 다른 운영 체제용 바이너리를 가져올 수 있습니다.</p></li>

<li><p><strong>1.</strong> aws-iam-authenticator 바이너리를 다운로드 및 설치하려면 다음과 같이 합니다.</p>

<ul>
<li><p>Amazon S3에서 aws-iam-authenticator 바이너리를 다운로드합니다.</p></li>

<li><p><strong>Linux:</strong> <a href="https://amazon-eks.s3-us-west-2.amazonaws.com/1.12.7/2019-03-27/bin/linux/amd64/aws-iam-authenticator">https://amazon-eks.s3-us-west-2.amazonaws.com/1.12.7/2019-03-27/bin/linux/amd64/aws-iam-authenticator</a></p></li>

<li><p><strong>MacOS:</strong> <a href="https://amazon-eks.s3-us-west-2.amazonaws.com/1.12.7/2019-03-27/bin/darwin/amd64/aws-iam-authenticator">https://amazon-eks.s3-us-west-2.amazonaws.com/1.12.7/2019-03-27/bin/darwin/amd64/aws-iam-authenticator</a></p></li>

<li><p><strong>Windows:</strong> <a href="https://amazon-eks.s3-us-west-2.amazonaws.com/1.12.7/2019-03-27/bin/windows/amd64/aws-iam-authenticator.exe">https://amazon-eks.s3-us-west-2.amazonaws.com/1.12.7/2019-03-27/bin/windows/amd64/aws-iam-authenticator.exe</a></p>

<p>아래 명령을 사용하여 바이너리를 다운로드하고 플랫폼에 맞는 올바른 URL로 교체합니다. 아래 예는 MacOS 클라이언트에 해당됩니다.</p>

<pre><code class="language-sh">curl -o aws-iam-authenticator https://amazon-eks.s3-us-west-2.amazonaws.com/1.12.7/2019-03-27/bin/darwin/amd64/aws-iam-authenticator
</code></pre></li>

<li><p>바이너리에 실행 권한을 적용합니다.</p>

<pre><code class="language-sh">chmod +x ./aws-iam-authenticator
</code></pre></li>

<li><p>바이너리를 $PATH의 폴더에 복사합니다. $HOME/bin/aws-iam-authenticator를 생성하고 $PATH가 $HOME/bin로 시작하는 것이 좋습니다.</p>

<pre><code class="language-sh">cp ./aws-iam-authenticator $HOME/bin/aws-iam-authenticator &amp;&amp; export PATH=$HOME/bin:$PATH
</code></pre></li>

<li><p>PATH 환경 변수에 $HOME/bin을 추가합니다.</p>

<ul>
<li><p>MacOS의 Bash 셸의 경우:</p>

<pre><code class="language-sh">echo 'export PATH=$HOME/bin:$PATH' &gt;&gt; ~/.bash_profile
</code></pre></li>

<li><p>Linux의 Bash 셸의 경우:</p>

<pre><code class="language-sh">echo 'export PATH=$HOME/bin:$PATH' &gt;&gt; ~/.bashrc
</code></pre></li>
</ul></li>

<li><p>aws-iam-authenticator 바이너리가 작동하는지 테스트합니다.</p>

<pre><code>aws-iam-authenticator help
</code></pre>

<p>&lt;!&ndash;</p></li>
</ul></li>

<li><p><strong>2.</strong> 또는 go get을 사용하여 GitHub에서 aws-iam-authenticator 바이너리를 설치합니다.</p>

<ul>
<li><p>go가 이미 설치되지 않은 경우 운영 체제에 대해 Go 프로그래밍 언어를 설치합니다. 자세한 내용은 Go 문서의 <a href="https://golang.org/doc/install#install">Install the Go tools</a>를 참조하십시오.</p></li>

<li><p>go get을 사용하여 aws-iam-authenticator 바이너리를 설치합니다.</p>

<pre><code>go get -u -v github.com/kubernetes-sigs/aws-iam-authenticator/cmd/aws-iam-authenticator
</code></pre></li>

<li><p>PATH 환경 변수에 $HOME/go/bin을 추가합니다.</p>

<ul>
<li><p>MacOS의 Bash 셸의 경우:</p>

<pre><code>export PATH=$HOME/go/bin:$PATH &amp;&amp; echo 'export PATH=$HOME/go/bin:$PATH' &gt;&gt; ~/.bash_profile
</code></pre></li>

<li><p>Linux의 Bash 셸의 경우:</p>

<pre><code>export PATH=$HOME/go/bin:$PATH &amp;&amp; echo 'export PATH=$HOME/go/bin:$PATH' &gt;&gt; ~/.bashrc
</code></pre></li>
</ul></li>

<li><p>aws-iam-authenticator 바이너리가 작동하는지 테스트합니다.</p>

<pre><code>aws-iam-authenticator help
</code></pre>

<p>&ndash;&gt;</p></li>
</ul></li>
</ul>

<h3 id="3-2-선택-사항-최신-aws-cli-다운로드-및-설치-합니다">3-2. (선택 사항) 최신 AWS CLI 다운로드 및 설치 합니다.</h3>

<p>AWS CLI가 Amazon EKS 사용을 명시적으로 요구하지는 않지만, <strong>update-kubeconfig</strong> 명령을 사용하면 kubeconfig 생성 프로세스가 크게 간소화됩니다.  AWS CLI에서 Amazon EKS를 사용하려면 <strong>1.16.18 버전 이상의</strong> AWS CLI가 설치되어 있어야 합니다.<br />
AWS CLI를 설치 또는 업그레이드하려면 AWS Command Line Interface 사용 설명서의 <a href="https://docs.aws.amazon.com/cli/latest/userguide/installing.html">AWS 명령줄 인터페이스</a> 설치를 참조하십시오.</p>

<ul>
<li><p>AWS CLI 버전은 다음 명령을 통해 확인할 수 있습니다.</p>

<pre><code>aws --version
</code></pre></li>
</ul>

<h3 id="4-1단계-amazon-eks-클러스터-생성">4. 1단계: Amazon EKS 클러스터 생성</h3>

<p>이제 Amazon EKS 클러스터를 생성할 수 있습니다.<br />
참조 : <a href="https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/create-cluster.html">Amazon EKS 클러스터 생성 사용 설명서</a>를 참고 합니다.</p>

<ul>
<li><p>사전 요구 사항은 다음과 같습니다.</p>

<ul>
<li><p>Amazon EKS 클러스터의 요건을 충족하는 VPC 및 전용 보안 그룹을 생성했습니다.<br />
자세한 내용은 <a href="https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/network_reqs.html">클러스터 VPC 고려 사항</a> 및 <a href="https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/sec-group-reqs.html">클러스터 보안 그룹 고려 사항</a> 단원을 참조하십시오</p></li>

<li><p>Amazon EKS 서비스 역할을 생성하여 클러스터에 적용했습니다. <a href="https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/service_IAM_role.html">Amazon EKS 서비스 IAM 역할</a> 가이드를 참조 하시기 바랍니다.</p></li>
</ul></li>
</ul>

<!--
* **중요**

    Amazon EKS 클러스터가 생성될 때 클러스터를 생성하는 IAM 엔터티(사용자 또는 역할)가 Kubernetes RBAC 권한 부여 표에 관리자(system:master 권한이 있음)로 추가됩니다.  
    처음에는 해당 IAM 사용자만이 kubectl을 사용하여 Kubernetes API를 호출할 수 있습니다. 자세한 정보는 [클러스터의 사용자 또는 IAM 역할 관리](https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/add-user-role.html) 단원을 참조하십시오. 또한 [Kubernetes용 AWS IAM Authenticator](https://github.com/kubernetes-sigs/aws-iam-authenticator)에서는 Go용 AWS SDK을 사용하여 Amazon EKS 클러스터에 대한 인증을 수행합니다.  
    콘솔을 사용하여 클러스터를 생성하는 경우 클러스터에서 kubectl 명령을 실행할 때 동일한 **IAM 사용자 자격 증명이 AWS SDK 자격 증명 체인에 있어야 합니다.**

    AWS CLI를 설치하고 구성하면 사용자에 대한 IAM 자격 증명을 구성할 수 있습니다. 이 자격 증명은 [Kubernetes용 AWS IAM Authenticator](https://github.com/kubernetes-sigs/aws-iam-authenticator)에 대해서도 유효합니다. AWS CLI가 사용자에 대해 적절하게 구성된 경우 [Kubernetes용 AWS IAM Authenticator](https://github.com/kubernetes-sigs/aws-iam-authenticator)에서도 이 자격 증명을 찾을 수 있습니다. 자세한 정보는 AWS Command Line Interface 사용 설명서의 [**AWS CLI**](https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-getting-started.html) 구성을 참조하십시오.
-->

<ul>
<li><p>AWS EKS 콘솔을 사용하여 클러스터를 생성 합니다.</p>

<ul>
<li><p><strong>1.</strong> Open the Amazon EKS console at <a href="https://console.aws.amazon.com/eks/home#/clusters">https://console.aws.amazon.com/eks/home#/clusters</a>.</p></li>

<li><p><strong>2.</strong> [Create cluster]를 선택합니다.</p>

<ul>
<li><strong>참고</strong><br />
IAM 사용자에게 관리 권한이 없는 경우 해당 사용자가 Amazon EKS API 작업을 호출하는 권한을 명시적으로 추가해야 합니다.<br />
자세한 내용은 <a href="https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/EKS_IAM_user_policies.html">Amazon EKS IAM 정책 만들기</a> 단원을 참조하십시오.</li>
</ul></li>

<li><p><strong>3.</strong> 클러스터 생성 페이지에서 다음 필드를 입력한 다음 생성을 선택합니다.</p>

<ul>
<li><p>Create cluster</p>

<ul>
<li><p>Cluster name :<br />
Amazon EKS 클러스터에 대해 고유한 이름입니다.</p></li>

<li><p>Kubernetes version :<br />
클러스터에 대해 사용할 Kubernetes 버전. 기본적으로 최신 버전이 선택됩니다.</p></li>

<li><p>Role name :<br />
<a href="https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/getting-started.html#role-create">Amazon EKS 서비스 역할 생성</a> 사용을 통해 생성한 IAM 역할을 선택합니다.</p></li>
</ul></li>

<li><p>Networking</p>

<ul>
<li><p>VPC :<br />
<a href="https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/create-public-private-vpc.html">Amazon EKS 클러스터 VPC 생성</a> 사용을 통해 생성한 VPC를 선택합니다.<br />
드롭다운 목록에서 VPC의 이름을 찾을 수 있습니다.</p></li>

<li><p>Subnets :<br />
기본적으로 위 VPC에서 사용 가능한 서브넷이 사전 선택됩니다.</p></li>

<li><p>Security groups :<br />
<a href="https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/getting-started.html#vpc-create">Amazon EKS 클러스터 VPC 생성</a> 사용을 통해 생성된 보안 그룹(SecurityGroups) 값을 선택 합니다.</p>

<ul>
<li><strong>중요</strong><br />
작업자 노드 AWS CloudFormation 템플릿이 여기서 사용자가 지정하는 보안 그룹을 수정하므로 클러스터 제어 플레인에 대한 <strong>전용 보안 그룹을 사용하는 것이 바람직합니다.</strong> 다른 리소스와 공유할 경우 이러한 리소스를 방해하거나 막을 수 있습니다.</li>
</ul></li>
</ul></li>

<li><p>정보 입력이 완료 되면 생성(Create)을 선택합니다.</p></li>
</ul></li>

<li><p><strong>4.</strong> Clusters 화면에서 새로 생성된 클러스터를 선택하고 클러스터 정보를 확인할 수 있습니다.</p></li>

<li><p><strong>5.</strong> Status(상태) 필드는 클러스터 프로비저닝 프로세스가 완료될 때까지 CREATING(생성 중)으로 표시됩니다.<br />
클러스터 프로비저닝이 완료될 때(보통 10분 이내) API server endpoint(API 서버 엔드포인트) 및 인증 기관 값을 기록합니다. 이 값은 kubectl 구성에 사용됩니다.</p>

<p><img src="/cocktail-manual-3.3.0-public/images/assets/KR/3.1.1/EKS/eks-create-cluster-1.png" alt="eks-create-cluster-1" />
<img src="/cocktail-manual-3.3.0-public/images/assets/KR/3.1.1/EKS/eks-create-cluster-2.png" alt="eks-create-cluster-1" />
<img src="/cocktail-manual-3.3.0-public/images/assets/KR/3.1.1/EKS/eks-create-cluster-2-1.png" alt="eks-create-cluster-1" />
<img src="/cocktail-manual-3.3.0-public/images/assets/KR/3.1.1/EKS/eks-create-cluster-2-2.png" alt="eks-create-cluster-1" /></p></li>

<li><p><strong>6.</strong> 클러스터를 생성했으므로 이제 <a href="https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/configure-kubectl.html">Amazon EKS용 kubectl 구성</a> 및 <a href="https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/create-kubeconfig.html">Amazon EKS에 대한 kubeconfig 생성</a>의 절차를 따라 새 클러스터와의 통신을 활성화합니다.</p></li>
</ul></li>
</ul>

<h3 id="4-1-amazon-eks용-kubectl-구성">4-1. Amazon EKS용 kubectl 구성</h3>

<p>AWS CLI로 kubeconfig를 생성하려면 <a href="https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/create-kubeconfig.html">Amazon EKS에 대한 kubeconfig 생성</a>을 참조 하세요.</p>

<ul>
<li><p>기본 AWS 자격 증명 공급자 체인을 사용 하려면 :<br />
AWS IAM 권한이 있는 관리자에게 사용자 보안 자격 증명(액세스 키)을 요청 합니다.</p>

<ul>
<li><p>AWS 자격 증명 공급자 체인 만들기</p>

<ul>
<li><p>AWS IAM service 콘솔에서 사용자(Users)를 선택합니다.</p></li>

<li><p>보안 자격 증명(Security credentials) 섹션 에서 액세스 키를 생성합니다.</p></li>
</ul>

<p><img src="/cocktail-manual-3.3.0-public/images/assets/KR/3.1.1/EKS/eks-create-security-credentials-1.png" alt="eks-create-security-credentials" /></p>

<ul>
<li>~/.aws/credentials 파일 안에 해당 키 값을 입력 합니다.<br /></li>
<li>윈도우 경우 사용자 디렉토리 안에 .aws\redentials 파일이 있습니다.</li>
</ul>

<pre><code>[default]
aws_access_key_id=
aws_secret_access_key=
</code></pre>

<ul>
<li>또는 AWS CLI를 사용해서 클러스터를 생성한 계정의 IAM유저의 보안자격증명을 설정합니다.</li>
</ul>

<pre><code># aws configure
AWS Access Key ID [None]: AKIAIHE#########FELA
AWS Secret Access Key [None]: uqm8MSDK######################Ddz29PcAz5
Default region name [ap-northeast-2]:
Default output format [None]:
# aws sts get-caller-identity
{
“Account”: “4952894#####”,
“UserId”: “AIDAJU5LO##########LQ”,
“Arn”: “arn:aws:iam::4952894#####:user/[username]”
}
</code></pre></li>
</ul></li>

<li><p>AWS CLI로 kubeconfig를 생성하려면 :</p>

<pre><code># aws eks --region region update-kubeconfig --name cluster_name
Updated context arn:aws:eks:ap-northeast-2:235896307296:cluster/cocktail-test-eks-cluster in C:\Users\shapj\.kube\config
# kubectl get svc
NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE
kubernetes ClusterIP 10.100.0.1 &lt;none&gt; 443/TCP 1m
</code></pre></li>
</ul>

<h3 id="5-2단계-amazon-eks-work-node-시작-및-구성">5. 2단계: Amazon EKS Work node 시작 및 구성</h3>

<p>Amazon EKS work node는 AWS 계정에서 실행되고, 클러스터 API 서버 엔드포인트를 통해 Cluster Control Plane에 연결합니다.<br />
참조 : <a href="https://docs.aws.amazon.com/eks/latest/userguide/clusters.html">https://docs.aws.amazon.com/eks/latest/userguide/clusters.html</a></p>

<ul>
<li><p><strong>중요</strong><br />
Amazon EKS Work node는 표준 Amazon EC2 인스턴스이고, 일반 Amazon EC2 온디맨드 인스턴스 가격을 기반으로 비용이 청구됩니다.<br />
자세한 내용은 Amazon EC2 요금을 참조하십시오.</p></li>

<li><p>이 주제의 사전 요구 사항은 다음과 같습니다.</p>

<ul>
<li><p>Amazon EKS 클러스터의 요건을 충족하는 VPC 및 보안 그룹을 생성했습니다.</p></li>

<li><p>Amazon EKS 클러스터를 생성하고 위 VPC 및 보안 그룹에 사용한다고 지정했습니다.</p></li>

<li><p>시작 이후 SSH를 사용하여 Work node에 연결하는 데 사용할 수 있는 Amazon EC2 SSH 키 페어가 생성되어 있어야 합니다.<br />
참조 : <a href="https://docs.aws.amazon.com/ko_kr/AWSEC2/latest/UserGuide/ec2-key-pairs.html">Amazon EC2를 사용해 키 페어 만들기</a></p></li>
</ul></li>
</ul>

<h3 id="5-1-템플릿을-사용해서-work-node를-시작하려면">5-1. 템플릿을 사용해서 Work node를 시작하려면</h3>

<ul>
<li><p><strong>클러스터 상태가 ACTIVE가 되기를 기다립니다.</strong><br />
※ 클러스터가 활성화되기 전에 Work node를 시작하면 Work node가 클러스터에 등록되지 않고 Work node를 다시 시작해야 한다.</p></li>

<li><p><a href="https://console.aws.amazon.com/cloudformation">https://console.aws.amazon.com/cloudformation</a> 에서 AWS CloudFormation 콘솔.</p></li>

<li><p>Amazon EKS를 생성할 리전을 선택한다.<br />
이 사용 설명서에서는 서울 리전을 사용한다.
&lt;!&ndash;
<strong>참고</strong><br />
현재 다음 리전에서 Amazon EKS를 사용할 수 있습니다. (한국어 사용 설명서는 아직 반영이 안되어 있습니다.)</p>

<ul>
<li><p><strong>US West (Oregon)</strong> (us-west-2)</p></li>

<li><p><strong>US East (N. Virginia)</strong> (us-east-1)</p></li>

<li><p><strong>US East (Ohio)</strong> (us-east-2)</p></li>

<li><p><strong>EU (Frankfurt)</strong> (eu-central-1)</p></li>

<li><p><strong>EU (Stockholm)</strong> (eu-north-1)</p></li>

<li><p><strong>EU (Ireland)</strong> (eu-west-1)</p></li>

<li><p><strong>Asia Pacific (Tokyo)</strong> (ap-northeast-1)</p></li>

<li><p><strong>Asia Pacific (Seoul)</strong> (ap-northeast-2)</p></li>

<li><p><strong>Asia Pacific (Singapore)</strong> (ap-southeast-1)</p></li>

<li><p><strong>Asia Pacific (Sydney)</strong> (ap-southeast-2)
&ndash;&gt;</p></li>
</ul></li>

<li><p><strong>[Create stack]</strong>을 선택한다.</p></li>

<li><p>템플릿 선택에서 Amazon S3 템플릿 URL 지정을 선택한다.</p></li>

<li><p>텍스트 영역에 다음 URL을 붙여넣고 다음을 선택한다.</p>

<pre><code>https://amazon-eks.s3-us-west-2.amazonaws.com/cloudformation/2019-02-11/amazon-eks-nodegroup.yaml

</code></pre></li>

<li><p>Specify Details(세부 정보 지정) 페이지에서 다음 파라미터를 입력하고 다음을 선택한다.</p>

<ul>
<li><p><strong>스택 이름</strong> :<br />
AWS CloudFormation 스택에 대한 스택 이름을 선택합니다. 예를 들어 <cluster-name>-worker-nodes로 사용할 수 있습니다.</p></li>

<li><p><strong>ClusterName</strong> :<br />
Amazon EKS 클러스터 생성 시 사용할 이름을 입력합니다.<br />
<strong>중요</strong> : 이 이름은 Amazon EKS 클러스터 이름과 정확하게 일치해야 합니다. 그렇지 않은 경우 Work node가 조인할 수 없습니다.</p></li>

<li><p><strong>ClusterControlPlaneSecurityGroup</strong> :<br />
Amazon EKS 클러스터를 생성할 때 사용한 보안 그룹 또는 그룹을 입력합니다. 이 AWS CloudFormation 템플릿은 지정된 클러스터 제어 플레인 보안 그룹의 트래픽을 허용하는 Work node 보안 그룹을 생성합니다.</p></li>

<li><p><strong>NodeGroupName</strong> :<br />
노드 그룹의 이름을 입력합니다. 이 이름은 나중에 Work node에 대해 생성된 Auto Scaling 노드 그룹을 식별하는 데 사용할 수 있습니다.</p></li>

<li><p><strong>NodeAutoScalingGroupMinSize</strong> :<br />
Auto Scaling 그룹이 축소할 수 있는 Work node의 최소 노드 수를 입력합니다.</p></li>

<li><p><strong>NodeAutoScalingGroupDesiredCapacity</strong> :
스택을 생성할 때 조정할 원하는 노드 수를 입력합니다.</p></li>

<li><p><strong>NodeAutoScalingGroupMaxSize</strong> :<br />
Auto Scaling 그룹이 확장할 수 있는 Work node의 최대 노드 수를 입력합니다.</p></li>

<li><p><strong>NodeInstanceType</strong> :<br />
Work node에 대한 인스턴스 유형을 선택합니다.</p></li>

<li><p><strong>NodeImageId</strong> :<br />
리전에 대한 현재 Amazon EKS Work node AMI ID를 입력합니다.<br />
최신 Amazon EKS 최적화 AMI(GPU 지원 유무는 상이)의 AMI ID는 다음 표에 나와 있습니다.</p>

<p>참조 : <a href="https://docs.aws.amazon.com/eks/latest/userguide/getting-started.html">https://docs.aws.amazon.com/eks/latest/userguide/getting-started.html</a></p>

<p><strong>Kubernetes version 1.12.7</strong></p>

<table>
<thead>
<tr>
<th align="left">리전</th>
<th align="left">Amazon EKS 최적화 AMI</th>
<th align="left">(GPU 지원 포함)</th>
</tr>
</thead>

<tbody>
<tr>
<td align="left">Asia Pacific (Tokyo) (ap-northeast-1)</td>
<td align="left">ami-0bfedee6a7845c26d</td>
<td align="left">ami-08e41cc84f4b3f27f</td>
</tr>

<tr>
<td align="left">Asia Pacific (Seoul) (ap-northeast-2)</td>
<td align="left">ami-0a904348b703e620c</td>
<td align="left">ami-0c43b885e33fdc29e</td>
</tr>

<tr>
<td align="left">Asia Pacific (Sydney) (ap-southeast-2)</td>
<td align="left">ami-0f0121e9e64ebd3dc</td>
<td align="left">ami-07079cd9ff1b312da</td>
</tr>
</tbody>
</table>

<p><strong>Kubernetes version 1.11</strong></p>

<table>
<thead>
<tr>
<th align="left">리전</th>
<th align="left">Amazon EKS 최적화 AMI</th>
<th align="left">(GPU 지원 포함)</th>
</tr>
</thead>

<tbody>
<tr>
<td align="left">US West (Oregon) (us-west-2)</td>
<td align="left">ami-0a2abab4107669c1b</td>
<td align="left">ami-0c9e5e2d8caa9fb5e</td>
</tr>

<tr>
<td align="left">US East (N. Virginia) (us-east-1)</td>
<td align="left">ami-0c24db5df6badc35a</td>
<td align="left">ami-0ff0241c02b279f50</td>
</tr>

<tr>
<td align="left">US East (Ohio) (us-east-2)</td>
<td align="left">ami-0c2e8d28b1f854c68</td>
<td align="left">ami-006a12f54eaafc2b1</td>
</tr>

<tr>
<td align="left">EU (Frankfurt) (eu-central-1)</td>
<td align="left">ami-010caa98bae9a09e2</td>
<td align="left">ami-0d6f0554fd4743a9d</td>
</tr>

<tr>
<td align="left">EU (Stockholm) (eu-north-1)</td>
<td align="left">ami-06ee67302ab7cf838</td>
<td align="left">ami-0b159b75</td>
</tr>

<tr>
<td align="left">EU (Ireland) (eu-west-1)</td>
<td align="left">ami-01e08d22b9439c15a</td>
<td align="left">ami-097978e7acde1fd7c</td>
</tr>

<tr>
<td align="left">Asia Pacific (Tokyo) (ap-northeast-1)</td>
<td align="left">ami-0f0e8066383e7a2cb</td>
<td align="left">ami-036b3969c5eb8d3cf</td>
</tr>

<tr>
<td align="left">Asia Pacific (Seoul) (ap-northeast-2)</td>
<td align="left">ami-0b7baa90de70f683f</td>
<td align="left">ami-0b7f163f7194396f7</td>
</tr>

<tr>
<td align="left">Asia Pacific (Singapore) (ap-southeast-1)</td>
<td align="left">ami-019966ed970c18502</td>
<td align="left">ami-093f742654a955ee6</td>
</tr>

<tr>
<td align="left">Asia Pacific (Sydney) (ap-southeast-2)</td>
<td align="left">ami-06ade0abbd8eca425</td>
<td align="left">ami-05e09575123ff498b</td>
</tr>
</tbody>
</table>

<p><strong>Kubernetes version 1.10</strong></p>

<table>
<thead>
<tr>
<th align="left">리전</th>
<th align="left">Amazon EKS 최적화 AMI</th>
<th align="left">(GPU 지원 포함)</th>
</tr>
</thead>

<tbody>
<tr>
<td align="left">US West (Oregon) (us-west-2)</td>
<td align="left">ami-09e1df3bad220af0b</td>
<td align="left">ami-0ebf0561e61a2be02</td>
</tr>

<tr>
<td align="left">US East (N. Virginia) (us-east-1)</td>
<td align="left">ami-04358410d28eaab63</td>
<td align="left">ami-0131c0ca222183def</td>
</tr>

<tr>
<td align="left">US East (Ohio) (us-east-2)</td>
<td align="left">ami-0b779e8ab57655b4b</td>
<td align="left">ami-0abfb3be33c196cbf</td>
</tr>

<tr>
<td align="left">EU (Frankfurt) (eu-central-1)</td>
<td align="left">ami-08eb700778f03ea94</td>
<td align="left">ami-000622b1016d2a5bf</td>
</tr>

<tr>
<td align="left">EU (Stockholm) (eu-north-1)</td>
<td align="left">ami-068b8a1efffd30eda</td>
<td align="left">ami-cc149ab2</td>
</tr>

<tr>
<td align="left">EU (Ireland) (eu-west-1)</td>
<td align="left">ami-0de10c614955da932</td>
<td align="left">ami-0dafd3a1dc43781f7</td>
</tr>

<tr>
<td align="left">Asia Pacific (Tokyo) (ap-northeast-1)</td>
<td align="left">ami-06398bdd37d76571d</td>
<td align="left">ami-0afc9d14b2fe11ad9</td>
</tr>

<tr>
<td align="left">Asia Pacific (Seoul) (ap-northeast-2)</td>
<td align="left">ami-08a87e0a7c32fa649</td>
<td align="left">ami-0d75b9ab57bfc8c9a</td>
</tr>

<tr>
<td align="left">Asia Pacific (Singapore) (ap-southeast-1)</td>
<td align="left">ami-0ac3510e44b5bf8ef</td>
<td align="left">ami-0ecce0670cb66d17b</td>
</tr>

<tr>
<td align="left">Asia Pacific (Sydney) (ap-southeast-2)</td>
<td align="left">ami-0d2c929ace88cfebe</td>
<td align="left">ami-03b048bd9d3861ce9</td>
</tr>
</tbody>
</table></li>

<li><p><strong>KeyName</strong> :<br />
시작 이후 SSH를 사용하여 Work node에 연결하는 데 사용할 수 있는 Amazon EC2 SSH 키 페어 이름을 입력합니다.<br />
Amazon EC2 키 페어가 아직 없는 경우 AWS Management 콘솔에서 새로 생성할 수 있습니다.<br />
자세한 내용은 Linux 인스턴스용 Amazon EC2 사용 설명서의 Amazon EC2 키 페어를 참조하십시오.</p>

<p><strong>참고 :</strong> 여기에 키 페어를 입력하지 않으면 AWS CloudFormation 스택이 생성되지 않습니다.</p></li>

<li><p><strong>BootstrapArguments</strong> :<br />
별도의 kubelet 인수와 같이 Work node 부트스트랩 스크립트에 전달할 선택적 인수를 지정합니다.<br />
자세한 내용은 <a href="https://github.com/awslabs/amazon-eks-ami/blob/master/files/bootstrap.sh에서">https://github.com/awslabs/amazon-eks-ami/blob/master/files/bootstrap.sh에서</a> 부트스트랩 스크립트 사용 정보를 참조하십시오.</p></li>

<li><p><strong>VpcId</strong> :<br />
Work node에서 시작해야 하는 VPC의 ID를 입력합니다.</p></li>

<li><p><strong>Subnets</strong> :<br />
Work node에서 시작해야 하는 위 VPC 내 서브넷을 선택합니다.</p></li>

<li><p>옵션 페이지에서 스택 리소스에 태그를 지정할 수 있습니다. <strong>[Next]</strong>를 선택합니다.</p></li>

<li><p>검토 페이지에서 정보를 검토하고, 스택이 IAM 리소스를 생성할 수 있음을 승인합니다. <strong>항목을 체크</strong> 한 다음 생성을 선택합니다.</p></li>

<li><p>스택이 생성된 후 콘솔에서 이를 선택하고 <strong>출력을</strong> 선택합니다.</p></li>

<li><p>생성된 노드 그룹에 대해 <strong>NodeInstanceRole을</strong> 기록합니다. Amazon EKS Work node를 구성할 때 필요합니다.</p></li>
</ul>

<p><img src="/cocktail-manual-3.3.0-public/images/assets/KR/3.1.1/EKS/eks-create-worker-node.png" alt="eks-create-worker-node" />
<img src="/cocktail-manual-3.3.0-public/images/assets/KR/3.1.1/EKS/eks-create-worker-node-3.png" alt="eks-create-worker-node" /></p></li>
</ul>

<h3 id="5-2-work-node가-클러스터에-조인하도록-하려면">5-2. Work node가 클러스터에 조인하도록 하려면</h3>

<ul>
<li><p>AWS IAM Authenticator 구성 맵을 다운로드, 편집 및 적용합니다.</p>

<ul>
<li><p>ConfigMap 다운로드:</p>

<pre><code class="language-sh">curl -O https://amazon-eks.s3-us-west-2.amazonaws.com/cloudformation/2019-02-11/aws-auth-cm.yaml
</code></pre></li>

<li><p>텍스트 편집기에서 파일을 엽니다. 인스턴스 역할의 <code>&lt;ARN(비인스턴스 프로파일)&gt;</code> 조각을 이전 절차에서 기록한 NodeInstanceRole 값으로 교체하고 파일을 저장합니다.</p>

<p><strong>중요:</strong><br />
이 파일에서 어떠한 행도 수정하지 마십시오.</p>

<pre><code class="language-yaml">apiVersion: v1
kind: ConfigMap
metadata:
name: aws-auth
namespace: kube-system
data:
mapRoles: |
    - rolearn: &lt;ARN of instance role (not instance profile)&gt;
    username: system:node:{{EC2PrivateDNSName}}
    groups:
        - system:bootstrappers
        - system:nodes
</code></pre></li>

<li><p>구성을 적용합니다. 이 명령을 완료하는 데 몇 분이 걸릴 수 있습니다.</p>

<pre><code class="language-sh">kubectl apply -f aws-auth-cm.yaml
</code></pre></li>
</ul></li>

<li><p>노드의 상태를 확인하고 Ready 상태가 될 때까지 대기합니다.</p>

<pre><code class="language-sh">kubectl get nodes --watch
</code></pre></li>

<li><p>Kubernetes Metric Server 설치 한다.<br />
참조 : <a href="https://docs.aws.amazon.com/eks/latest/userguide/metrics-server.html">https://docs.aws.amazon.com/eks/latest/userguide/metrics-server.html</a></p></li>

<li><p>Cocktail-addon을 설치 한다.</p></li>
</ul>

<h2 id="amazon-elastic-file-system-만들기">Amazon Elastic File System 만들기</h2>

<p>Amazon Elastic File System (Amazon EFS)은 Amazon EC2에서 사용하기 위한 간단하고 확장 가능한 파일 스토리지를 제공합니다.<br />
참조 : <a href="https://docs.aws.amazon.com/ko_kr/efs/latest/ug/whatisefs.html">https://docs.aws.amazon.com/ko_kr/efs/latest/ug/whatisefs.html</a></p>

<!--

### Amazon EFS 파일 시스템 만들기

### 1. EC2 리소스 만들기 및 EC2 인스턴스 시작
이 사용 설명서에서는 이미 생성한 인스턴스의 보안 그룹만 할당 합니다.
참조 : {1단계: EC2 리소스 만들기 및 EC2 인스턴스 시작}(https://docs.aws.amazon.com/ko_kr/efs/latest/ug/gs-step-one-create-ec2-resources.html)

* 인스턴스 보기를 선택합니다.

* 목록에서 생성한 인스턴스 이름을 선택한 다음 작업을 선택합니다.

    * 열린 메뉴에서 네트워킹과 보안 그룹 변경을 차례대로 선택합니다.

    ![efs-create-security-group-1](/cocktail-manual-3.3.0-public/images/assets/KR/3.1.1/EKS/efs-create-security-group-1.png)

    * 기본 VPC 보안 그룹이라는 설명이 있는 보안 그룹 옆 확인란을 선택합니다.

    ![efs-create-security-group-2](/cocktail-manual-3.3.0-public/images/assets/KR/3.1.1/EKS/efs-create-security-group-2-1.png)

    * 보안 그룹 할당을 선택합니다.

    **참고**  

    이 단계에서는 VPC의 기본 보안 그룹을 Amazon EC2 인스턴스에 할당합니다.  
    이렇게하면 인스턴스가 Amazon EFS 파일 시스템 마운트 대상이 2 단계 : Amazon EFS 파일 시스템 만들기에서 연결 권한을 부여하는 보안 그룹의 구성원인지 확인할 수 있습니다.

    기본 인바운드 및 아웃 바운드 규칙을 사용하여 VPC의 기본 보안 그룹을 사용하면 잠재적으로이 인스턴스와이 파일 시스템을 VPC 내에서 잠재적 인 위협에 노출시킬 수 있습니다.

    * 목록에서 인스턴스를 선택합니다.

    * 설명 탭에서 보안 그룹 – 옆에 두 항목이 나열되어 있는지 확인합니다. 하나는 기본 VPC 보안 그룹용이고 다른 하나는 인스턴스 시작 시 생성했던 보안 그룹용입니다.

    ![efs-create-security-group-3](/cocktail-manual-3.3.0-public/images/assets/KR/3.1.1/EKS/efs-create-security-group-3.png)

-->

<h3 id="1-보안그룹-생성">1. 보안그룹 생성</h3>

<ul>
<li>EFS 파일 시스템이 사용할 보안 그룹을 생성 한다.</li>
</ul>

<h3 id="2-amazon-efs-파일-시스템-생성">2. Amazon EFS 파일 시스템 생성</h3>

<ul>
<li><p>Amazon EFS 파일 시스템 생성</p>

<ul>
<li><p><a href="https://console.aws.amazon.com/efs/">Amazon EFS 관리 콘솔</a>을 엽니다.</p></li>

<li><p><strong>Create File System(파일 시스템 생성)</strong>을 선택합니다.</p></li>

<li><p>VPC와 연결된 시큐리티그룹을 선택(NFS 포트가 열려 있어야한다./ port : 2049)</p></li>

<li><p>목록에서 탑재 대상을 생성하기 원하는 서브넷을 선택한다.</p></li>

<li><p>IP 주소를 자동으로 선택.</p></li>

<li><p><strong>[Next Step]을</strong> 선택합니다.</p></li>

<li><p>파일 시스템의 이름을 지정하고, 기본 성능 및 처리량 모드로 선택한 범용 및 버스팅 모드를 유지한 후 <strong>다음 단계를</strong> 선택합니다.</p></li>

<li><p><strong>Create File System(파일 시스템 생성)</strong>을 선택합니다.</p></li>

<li><p>목록에서 파일 시스템을 선택하고 <strong>File system ID(파일 시스템 ID)</strong>에 대한 값을 기록합니다. 다음 단계에 이 값이 필요합니다.</p></li>
</ul></li>
</ul>

<!--

### 3. Amazon EC2 인스턴스에 연결 및 Amazon EFS 파일 시스템 탑재
Windows(Git Bash) 또는 Linux를 실행 중인 컴퓨터에서 Amazon EC2 인스턴스에 연결할 수 있습니다. Amazon EC2 인스턴스를 연결하고 Amazon EFS 파일 시스템을 연결하려면 Amazon EFS 파일 시스템의 탑재 대상에 대한 **File system ID(파일 시스템 ID)** 값이 필요합니다

* Amazon EC2 인스턴스에 연결하고 Amazon EFS 파일 시스템을 탑재하려면

    * SSH 클라이언트를 열고 EC2 인스턴스에 연결합니다.

        * 다음 명령을 사용하여 사용자만 읽을 수 있도록 프라이빗 키 파일의 권한을 설정합니다.

        ```
        chmod 400 /path/my-key-pair.pem
        ```  
        이러한 권한을 설정하지 않으면 이 키 페어를 사용하여 인스턴스에 연결할 수 없습니다.  
        자세한 정보는 [오류: 보호되지 않는 프라이빗 키 파일](https://docs.aws.amazon.com/ko_kr/AWSEC2/latest/UserGuide/TroubleshootingInstancesConnecting.html#troubleshoot-unprotected-key) 단원을 참조하십시오.


        * ssh 명령을 사용하여 인스턴스에 연결합니다.  
        프라이빗 키(.pem) 파일과 user_name@public_dns_name을 지정합니다. 예를 들어 Amazon Linux 2 또는 Amazon Linux AMI를 사용한 경우 사용자 이름은 ec2-user입니다.

            다음과 같은 응답이 표시됩니다:

            ```
            The authenticity of host 'ec2-198-51-100-1.compute-1.amazonaws.com (10.254.142.33)'
            can't be established.
            RSA key fingerprint is 1f:51:ae:28:bf:89:e9:d8:1f:25:5d:37:2d:7d:b8:ca:9f:f5:f1:6f.
            Are you sure you want to continue connecting (yes/no)?
            ```

        * yes를 입력합니다.

    * Amazon EFS 파일 시스템을 탑재하려면 :  
    **참고 :** 파일 시스템 목록에서 생성 한 파일 시스템을 선택 하면 파일 시스템 액세스에서 해당 파일 시스템의 탑재 지침이 있습니다.
    
        * 연결 후 Amazon EFS 탑재 헬퍼가 있는 amazon-efs-utils 패키지를 설치합니다.

        ```
        sudo yum install -y amazon-efs-utils
        ```

        * 다음 명령으로 탑재 지점에 대한 디렉터리를 만듭니다.

        ```
        sudo mkdir efs
        ```

        * EFS 탑재 헬퍼 사용:

        ```
        sudo mount -t efs fs-b4c21dd5:/ efs
        ```

        * 다음 명령을 사용하여 파일 생성을 확인 합니다.

        ```
        $ cd efs
        $ sudo mkdir getting-started
        $ sudo chown ec2-user getting-started
        $ cd getting-started
        $ touch test-file.txt
        $ ls -al
        ```
-->

<h3 id="4-efs-persistent-volumes-on-kubernetes-on-aws">4. EFS Persistent Volumes on Kubernetes on AWS</h3>

<p>참조 : <a href="https://aws.amazon.com/efs/when-to-choose-efs/">Amazon EFS를 선택해야하는 경우</a></p>

<ul>
<li><p><strong>Deploy the efs-provisioner</strong><br />
<strong>참조 :</strong> <a href="https://github.com/kubernetes-incubator/external-storage/tree/master/aws/efs">https://github.com/kubernetes-incubator/external-storage/tree/master/aws/efs</a><br />
efs-provisioner를 사용하면 EFS 저장소를 kubernetes의 PersistentVolume으로 마운트 할 수 있습니다.<br />
AWS EFS 리소스에 액세스 할 수있는 컨테이너로 구성됩니다.<br />
컨테이너는 EFS 파일 시스템 ID, AWS 영역 및 efs-provisioner에 사용할 이름을 포함하는 configmap을 읽습니다.</p>

<ul>
<li><p>아래 스크립트를 사용 합니다.</p></li>

<li><p><strong>kubectl apply -f 1-eks-cocktail-efs-rbac.yaml</strong><br />
클러스터에 RBAC가 활성화되어 있거나 OpenShift를 실행중인 경우 공급자에게 권한을 부여해야합니다.<br />
&ldquo;default&rdquo;가 아닌 네임 스페이스 / 프로젝트에 있다면 rbac.yaml을 편집하십시오.</p></li>
</ul>

<pre><code>---
# ServiceAccount
apiVersion: v1
kind: ServiceAccount
metadata:
name: efs-provisioner
---
kind: ClusterRole
apiVersion: rbac.authorization.k8s.io/v1
metadata:
name: efs-provisioner-runner
rules:
- apiGroups: [&quot;&quot;]
    resources: [&quot;persistentvolumes&quot;]
    verbs: [&quot;get&quot;, &quot;list&quot;, &quot;watch&quot;, &quot;create&quot;, &quot;delete&quot;]
- apiGroups: [&quot;&quot;]
    resources: [&quot;persistentvolumeclaims&quot;]
    verbs: [&quot;get&quot;, &quot;list&quot;, &quot;watch&quot;, &quot;update&quot;]
- apiGroups: [&quot;storage.k8s.io&quot;]
    resources: [&quot;storageclasses&quot;]
    verbs: [&quot;get&quot;, &quot;list&quot;, &quot;watch&quot;]
- apiGroups: [&quot;&quot;]
    resources: [&quot;events&quot;]
    verbs: [&quot;create&quot;, &quot;update&quot;, &quot;patch&quot;]
---
kind: ClusterRoleBinding
apiVersion: rbac.authorization.k8s.io/v1
metadata:
name: run-efs-provisioner
subjects:
- kind: ServiceAccount
    name: efs-provisioner
    # replace with namespace where provisioner is deployed
    namespace: default
roleRef:
kind: ClusterRole
name: efs-provisioner-runner
apiGroup: rbac.authorization.k8s.io
---
kind: Role
apiVersion: rbac.authorization.k8s.io/v1
metadata:
name: leader-locking-efs-provisioner
rules:
- apiGroups: [&quot;&quot;]
    resources: [&quot;endpoints&quot;]
    verbs: [&quot;get&quot;, &quot;list&quot;, &quot;watch&quot;, &quot;create&quot;, &quot;update&quot;, &quot;patch&quot;]
---
kind: RoleBinding
apiVersion: rbac.authorization.k8s.io/v1
metadata:
name: leader-locking-efs-provisioner
subjects:
- kind: ServiceAccount
    name: efs-provisioner
    # replace with namespace where provisioner is deployed
    namespace: default
roleRef:
kind: Role
name: leader-locking-efs-provisioner
apiGroup: rbac.authorization.k8s.io
</code></pre>

<ul>
<li><strong>kubectl apply -f 2-eks-cocktail-efs-provisioner.yaml</strong><br />
Deployment efs-provisione</li>
</ul>

<pre><code>---
apiVersion: v1
kind: ConfigMap
metadata:
name: efs-provisioner
data:
# your file.system.id , aws.region
file.system.id: fs-b4c21dd5
aws.region: ap-northeast-2
provisioner.name: acornsoft.io/aws-efs
dns.name: &quot;&quot;
---
---
kind: Deployment
apiVersion: extensions/v1beta1
metadata:
name: efs-provisioner
spec:
replicas: 1
strategy:
    type: Recreate 
template:
    metadata:
    labels:
        app: efs-provisioner
    spec:
    serviceAccount: efs-provisioner
    containers:
        - name: efs-provisioner
        image: quay.io/external_storage/efs-provisioner:latest
        env:
            - name: FILE_SYSTEM_ID
            valueFrom:
                configMapKeyRef:
                name: efs-provisioner
                key: file.system.id
            - name: AWS_REGION
            valueFrom:
                configMapKeyRef:
                name: efs-provisioner
                key: aws.region
            - name: DNS_NAME
            valueFrom:
                configMapKeyRef:
                name: efs-provisioner
                key: dns.name
                optional: true
            - name: PROVISIONER_NAME
            valueFrom:
                configMapKeyRef:
                name: efs-provisioner
                key: provisioner.name
        volumeMounts:
            - name: pv-volume
            mountPath: /persistentvolumes
    volumes:
        - name: pv-volume
        nfs:
            # your file-system DNS NAME
            server: fs-b4c21dd5.efs.ap-northeast-2.amazonaws.com
            path: /
---
</code></pre>

<ul>
<li><strong>kubetl apply -f 3-eks-cocktail-efs-storage-class.yaml</strong><br />
Cocktail 퍼시스턴트 볼륨 Storage Class 생성</li>
</ul>

<pre><code># single-storage : EBS-PV
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
name: single-storage
annotations:
    storageclass.beta.kubernetes.io/is-default-class: &quot;false&quot;
labels:
    acornsoft.io/provisioner-type: AWSEBS
    acornsoft.io/type: SINGLE
    k8s-addon: storage-aws.addons.k8s.io
provisioner: kubernetes.io/aws-ebs
reclaimPolicy: Delete
volumeBindingMode: Immediate
parameters:
type: gp2

---
# shared-storage : EFS-PV
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
name: shared-storage
annotations:
    storageclass.beta.kubernetes.io/is-default-class: &quot;false&quot;
labels:
    acornsoft.io/provisioner-type: AWSEFS
    acornsoft.io/type: SHARED
    k8s-addon: storage-aws.addons.k8s.io
# your provisioner.name   
provisioner: efs-test-pvc/aws-efs
---
</code></pre>

<ul>
<li><strong>4-eks-cocktail-efs-sample-pvc.yaml</strong>
샘플 PVC</li>
</ul>

<pre><code># sample pvc
kind: PersistentVolumeClaim
apiVersion: v1
metadata:
name: efs-test-pvc
annotations:
    volume.beta.kubernetes.io/storage-class: &quot;shared-storage&quot;
spec:
storageClassName: shared-storage
accessModes:
    - ReadWriteMany
resources:
    requests:
    storage: 1Mi
---
</code></pre>

<ul>
<li>아래 명령으로 퍼시스턴트 볼륨을 확인 합니다.
<br /></li>
</ul>

<pre><code>kubectl get pv 
</code></pre>

<p><img src="/cocktail-manual-3.3.0-public/images/assets/KR/3.1.1/EKS/efs-create-pv-1.png" alt="efs-create-pv-1" /></p></li>
</ul>


<footer class=" footline" >
	
</footer>


        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="/cocktail-manual-3.3.0-public/8.operation/8.1.cluster-install/8.1.1.kass/8.1.1.2-cluster-kass-aks/" title="8.1.1.2 AKS 클러스터 만들기"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/cocktail-manual-3.3.0-public/8.operation/8.1.cluster-install/8.1.1.kass/8.1.1.4-cluster-kass-eks-policy/" title="8.1.1.3 EKS 클러스터 정책 / 권한" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/cocktail-manual-3.3.0-public/js/clipboard.min.js?1555832258"></script>
    <script src="/cocktail-manual-3.3.0-public/js/perfect-scrollbar.min.js?1555832258"></script>
    <script src="/cocktail-manual-3.3.0-public/js/perfect-scrollbar.jquery.min.js?1555832258"></script>
    <script src="/cocktail-manual-3.3.0-public/js/jquery.sticky.js?1555832258"></script>
    <script src="/cocktail-manual-3.3.0-public/js/featherlight.min.js?1555832258"></script>
    <script src="/cocktail-manual-3.3.0-public/js/html5shiv-printshiv.min.js?1555832258"></script>
    <script src="/cocktail-manual-3.3.0-public/js/highlight.pack.js?1555832258"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/cocktail-manual-3.3.0-public/js/modernizr.custom-3.6.0.js?1555832258"></script>
    <script src="/cocktail-manual-3.3.0-public/js/learn.js?1555832258"></script>
    <script src="/cocktail-manual-3.3.0-public/js/hugo-learn.js?1555832258"></script>

    <link href="/cocktail-manual-3.3.0-public/mermaid/mermaid.css?1555832258" type="text/css" rel="stylesheet" />
    <script src="/cocktail-manual-3.3.0-public/mermaid/mermaid.js?1555832258"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-105947713-1', 'auto');
  ga('send', 'pageview');

</script>
  </body>
</html>

